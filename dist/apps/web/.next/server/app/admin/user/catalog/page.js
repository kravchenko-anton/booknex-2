(()=>{var e={};e.id=97,e.ids=[97],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},32081:e=>{"use strict";e.exports=require("child_process")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},13639:e=>{"use strict";e.exports=require("domain")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},31405:e=>{"use strict";e.exports=require("inspector")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},74433:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q}),s(73363);var r=s(30494),a=s(1914),i=s(85150),l=s(44770),o=s(32155),n=s(66965),d=s(58133);let c=({remove:e,removeLoading:t})=>[{id:"id",enableHiding:!1,header:()=>r.jsx("p",{className:"text-center text-lg",children:"id"}),cell:({row:e})=>r.jsx("p",{className:"text-center text-2xl",children:e.original.id})},{id:"picture",header:()=>r.jsx("p",{className:"text-center text-lg",children:"Picture"}),enableHiding:!1,cell:({row:e})=>r.jsx("img",{alt:e.original.email,src:(0,n.q)(e.original.picture||"fallback.png"),width:50,height:50,className:" mx-auto h-[60px] w-[60px] rounded-md"})},{id:"Bio",enableHiding:!1,header:()=>r.jsx("p",{className:"text-center text-lg",children:"Info"}),cell:({row:e})=>(0,r.jsxs)("div",{className:" gap-4",children:[r.jsx("h2",{className:"text-lg",children:e.original.fullName}),r.jsx("p",{className:"text-xm",children:e.original.email}),(0,r.jsxs)("p",{className:"text-xm",children:[" ",e.original.socialId]}),(0,r.jsxs)("p",{children:["joined: ",function(e){let t=new Intl.RelativeTimeFormat("en"),s={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},r=(e.getTime()-Date.now())/1e3;for(let e in s){let a=s[e];if(!a||!(a<Math.abs(r)))continue;let i=r/a;return t.format(Math.round(i),e)}return"Just now"}(new Date(e.original.createdAt))]}),(0,r.jsxs)("p",{children:["location: ",(0,r.jsxs)("b",{className:"font-bold",children:[" ",e.original.location]})]})]})},{id:"Activities",enableHiding:!1,header:()=>r.jsx("p",{className:"text-center text-lg",children:"Activities"}),cell:({row:e})=>r.jsx(a.Z,{onlyGraph:!0,data:e.original.activities})},{id:"Library",enableHiding:!1,header:()=>r.jsx("p",{className:"text-center text-lg",children:"Library"}),cell:({row:e})=>(0,r.jsxs)("div",{className:" max-w-[80px] items-center justify-center  gap-2",children:[r.jsx(i.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:`${e.original._count.savedBooks} Saved`}),r.jsx(i.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:`${e.original._count.readingBooks} Read`}),r.jsx(i.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:`${e.original._count.finishedBooks} Finish`})]})},{id:"genres",enableHiding:!1,header:()=>r.jsx("p",{className:"text-center text-xl",children:"Genres"}),cell:({row:e})=>r.jsx("div",{className:" max-w-[110px] items-center justify-center gap-1",children:e.original.selectedGenres.map(e=>r.jsx(i.zx,{size:"sm",variant:"muted",className:"mb-2 w-full",children:e.name},e.slug))})},{id:"Actions",cell:({row:s})=>(0,r.jsxs)(l.h_,{children:[r.jsx(l.$F,{className:"focus-visible:outline-0",children:r.jsx(d.yF,{height:40,width:40,className:"bg-muted border-bordered rounded border-[1px] p-2"})}),r.jsx(l.AW,{align:"end",children:r.jsx(l.Xi,{onClick:()=>(0,o.Hz)("Are you sure you want to delete this book?",{action:{label:"Delete",onClick:()=>{if(t)return(0,o.Rr)("Please wait");e(s.original.id)}}}),children:"Delete"})})]})}];var x=s(66240),u=s(43840),m=s(18193),p=s(49104);let h=({searchTerm:e="",page:t=0})=>{let s=(0,u.NL)(),{data:r}=(0,m.a)({queryKey:["users",e,t],queryFn:()=>x.Z.user.catalog(e,+t),select:e=>e.data}),{mutateAsync:a,isLoading:i}=(0,p.D)({mutationKey:["delete-user"],mutationFn:e=>x.Z.user.remove(e),onError(e){console.log("error",e)},async onSuccess(){(0,o.Qm)("User deleted"),await s.invalidateQueries({queryKey:["users"]})}});return{users:r,deleteUser:a,deleteUserLoading:i}};var g=s(73265),f=s(48581),b=s(36756),j=s(48437),y=s(67293),N=s(25274),v=s(44639),w=s(48860);let q=()=>{let e=(0,w.useRouter)(),{page:t,searchTerm:s}=(0,b.C)(),{users:a,deleteUser:i,deleteUserLoading:l}=h({page:t,searchTerm:s}),o=(0,N.b7)({data:a?.data??[],columns:c({remove:i,removeLoading:l}),getCoreRowModel:(0,v.sC)()});return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(f.Z,{title:"Users",defaultTerm:s,onSearchSubmit:t=>{e.replace((0,j.H)(y.M.userCatalogRoute,{searchTerm:t.searchTerm}))}}),(0,r.jsx)(g.Z,{currentPage:t,totalPages:Number(a?.totalPages),canLoadMore:a?.canLoadMore,table:o})]})}},2522:(e,t,s)=>{"use strict";let r;s.r(t),s.d(t,{$$typeof:()=>c,__esModule:()=>d,default:()=>h,generateImageMetadata:()=>m,generateMetadata:()=>u,generateViewport:()=>p}),s(651);var a=s(75446),i=s(48692),l=s(87149),o=s(54580);let n=(0,s(48624).createProxy)(String.raw`D:\projects\booknex-2\apps\web\app\admin\user\catalog\page.tsx`),{__esModule:d,$$typeof:c}=n,x=n.default;r="function"==typeof x?new Proxy(x,{apply:(e,t,s)=>{let r,n,d;try{let e=o.requestAsyncStorage.getStore();r=(0,a.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),n=(0,a.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),d=(0,i.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return l.D(e,{componentRoute:"/admin/user/catalog",componentType:"Unknown",sentryTraceHeader:r,baggageHeader:n,headers:d}).apply(t,s)}}):x;let u=void 0,m=void 0,p=void 0,h=r},35571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.ZP,__next_app__:()=>x,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>n});var r=s(18885),a=s(91163),i=s(99739),l=s(71717),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let n=["",{children:["admin",{children:["user",{children:["catalog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2522)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\user\\catalog\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,12115)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,14693)),"D:\\projects\\booknex-2\\apps\\web\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,30992)),"D:\\projects\\booknex-2\\apps\\web\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,95316)),"D:\\projects\\booknex-2\\apps\\web\\app\\not-found.tsx"]}],d=["D:\\projects\\booknex-2\\apps\\web\\app\\admin\\user\\catalog\\page.tsx"],c="/admin/user/catalog/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/user/catalog/page",pathname:"/admin/user/catalog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},24892:(e,t,s)=>{Promise.resolve().then(s.bind(s,74433))},1914:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s(30494),a=s(63438),i=s(59115),l=s(88735),o=s(35193);let n=["hsl(0, 0%, 20%)","hsl(0, 0%, 30%)","hsl(0, 0%, 40%)","hsl(0, 0%, 60%)","hsl(0, 0%, 80%)","#7DB9B6","#E96479","#E33B54","#D61F3A","#B31930","#A1172C"],d=({onlyGraph:e=!1,data:t=[]})=>{let[s,d]=(0,l.useState)(null),c=e=>{0!==e.level&&d(e)};return(0,r.jsxs)("div",{className:"sm:min-w-full xl:min-w-[600px]",children:[r.jsx(o.ZP,{hideColorLegend:e,hideTotalCount:e,hideMonthLabels:e,maxLevel:10,data:t,style:{width:"100%"},theme:{dark:n},eventHandlers:{onClick:()=>c}}),r.jsx(a.dZ,{isOpen:!!s,onClose:()=>d(null),children:s?(0,r.jsxs)(r.Fragment,{children:[r.jsx(a.Tu,{className:"pb-2",children:(0,r.jsxs)("h1",{className:"text-3xl font-medium",children:["Activities: ",new Date(s.date).toDateString()]})}),r.jsx("div",{className:"no-scrollbar h-[95%] w-full overflow-y-scroll",children:s.activities?.map(e=>r.jsxs("p",{className:i.cn("text-success  font-mono text-lg"),children:[r.jsxs("b",{className:"text-gray",children:["[",e.time,"]"]})," ",r.jsxs("b",{className:"font-mono",style:{color:n[e.importance]},children:["[",e.importance,"]"]})," ",e.message]},e.time))})]}):r.jsx("div",{children:"Nothing selected"})})]})}},73265:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(30494),a=s(85150),i=s(93243),l=s(25274),o=s(2764);let n=({currentPage:e,table:t,canLoadMore:s,totalPages:n})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.iA,{children:[r.jsx(i.xD,{children:t.getHeaderGroups().map(e=>r.jsx(i.SC,{children:e.headers.map(e=>r.jsx(i.ss,{children:e.isPlaceholder?null:(0,l.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),t.getRowModel().rows?.length?r.jsx(i.RM,{children:t.getRowModel().rows.map(e=>r.jsx(i.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>r.jsx(i.pj,{children:(0,l.ie)(e.column.columnDef.cell,{...e.getContext()})},e.id))},e.id))}):null]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,r.jsxs)("div",{className:"text-muted-foreground flex-1 text-sm",children:[e," page of ",n," pages"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(o.default,{href:e>=1?`?page=${e-1}`:"",children:r.jsx(a.zx,{size:"sm",disabled:e<1,children:"Previous"})}),r.jsx("a",{href:s?`?page=${e+1}`:"",children:r.jsx(a.zx,{size:"sm",disabled:!s,children:"Next"})})]})]})]})},48581:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(30494),a=s(85150),i=s(58133),l=s(43789);let o=({children:e,defaultTerm:t,title:s="",onSearchSubmit:o})=>{let{control:n,handleSubmit:d}=(0,l.cI)({defaultValues:{searchTerm:t}});return(0,r.jsxs)("div",{className:"flex w-full items-center justify-between  pb-2",children:[r.jsx("div",{children:r.jsx("h1",{className:"hidden text-3xl font-medium sm:block",children:s})}),(0,r.jsxs)("div",{className:"flex gap-5",children:[r.jsx("form",{onSubmit:d(o),children:r.jsx(a.gN,{control:n,icon:i.ol,name:"searchTerm",placeholder:"Explore...",type:"search"})}),e]})]})}},63438:(e,t,s)=>{"use strict";s.d(t,{Tu:()=>p,dZ:()=>h});var r=s(30494),a=s(59115),i=s(83137),l=s(84435),o=s(58133),n=s(88735);let d=i.fC,c=i.h_,x=(0,n.forwardRef)(({className:e,...t},s)=>r.jsx(i.aV,{className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 ",e),...t,ref:s}));x.displayName=i.aV.displayName;let u=(0,l.j)("fixed z-50 gap-4 bg-foreground p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b  border-foreground data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-foreground data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-foreground border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l border-foreground data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right md:max-w-lg sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=(0,n.forwardRef)(({side:e="right",className:t,children:s,...l},n)=>(0,r.jsxs)(c,{children:[r.jsx(x,{}),(0,r.jsxs)(i.VY,{ref:n,className:(0,a.cn)(u({side:e}),t),...l,children:[s,(0,r.jsxs)(i.x8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-primary absolute right-4 top-4 rounded opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[r.jsx(o.x8,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=i.VY.displayName;let p=({className:e,...t})=>r.jsx("div",{className:(0,a.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});p.displayName="SheetHeader",(0,n.forwardRef)(({className:e,...t},s)=>r.jsx(i.Dx,{ref:s,className:(0,a.cn)("text-foreground text-lg font-semibold",e),...t})).displayName=i.Dx.displayName,(0,n.forwardRef)(({className:e,...t},s)=>r.jsx(i.dk,{ref:s,className:(0,a.cn)("text-muted-foreground text-sm",e),...t})).displayName=i.dk.displayName;let h=({children:e,isOpen:t=!1,onClose:s=()=>null})=>r.jsx(d,{open:t,onOpenChange:s,children:r.jsx(c,{children:r.jsx(m,{children:e})})})},93243:(e,t,s)=>{"use strict";s.d(t,{RM:()=>n,SC:()=>d,iA:()=>l,pj:()=>x,ss:()=>c,xD:()=>o});var r=s(30494),a=s(59115),i=s(88735);let l=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("div",{className:" border-bordered border-collapse overflow-auto rounded border-[1px]",children:r.jsx("table",{ref:s,className:(0,a.cn)(" relative w-full caption-bottom   rounded text-sm",e),...t})}));l.displayName="Table";let o=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,a.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let n=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,a.cn)("",e),...t}));n.displayName="TableBody",(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,a.cn)(" border-[1px] border-t font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,a.cn)(" border-bordered bg-foreground  border-[1px]  border-x-0 border-b border-t-0  transition-colors",e),...t}));d.displayName="TableRow";let c=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,a.cn)("border-bordered bg-muted overflow-hidden border-b-2 border-t-0 px-3 py-1 text-center align-middle  text-white  [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));c.displayName="TableHead";let x=(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));x.displayName="TableCell",(0,i.forwardRef)(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,a.cn)("text-gray mt-4 text-sm",e),...t})).displayName="TableCaption"},36756:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(1789),a=s(48860);let i=()=>{let e=(0,a.useSearchParams)();return{searchTerm:(0,r.d)(e.get("searchTerm")),page:(0,r.s)(e.get("page")),dialog:(0,r.d)(e.get("dialog"))}}},48437:(e,t,s)=>{"use strict";s.d(t,{H:()=>r});let r=(e,t)=>`${e}?${new URLSearchParams(t).toString()}`},1789:(e,t,s)=>{"use strict";s.d(t,{d:()=>a,s:()=>r});let r=e=>{if(!e)return 0;if(e<0||e>1e4)throw Error("Invalid parameter");return+e},a=e=>{if(!e)return"";if("string"!=typeof e)throw Error("Invalid parameter");return e}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[470,169,358,678,274,318,536,380],()=>s(35571));module.exports=r})();
//# sourceMappingURL=page.js.map