(()=>{var e={};e.id=811,e.ids=[811],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},32081:e=>{"use strict";e.exports=require("child_process")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},13639:e=>{"use strict";e.exports=require("domain")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},31405:e=>{"use strict";e.exports=require("inspector")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},947:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N}),s(73363);var r=s(30494),o=s(37840),i=s(35026),a=s(63569),n=s(85150),c=s(47098),l=s(66240),p=s(59115);function u(e,t){return!0===e||Array.isArray(e)?t:Object.fromEntries(Object.keys(e).map(s=>[s,u(e[s],t[s])]))}var d=s(32155),x=s(1789),m=s(90856),g=s(43840),h=s(18193),b=s(49104),y=s(85545),j=s(40096);let k=y.z.object({slug:y.z.string(),name:y.z.string(),icon:y.z.string()}),v=y.z.object({title:y.z.string().optional(),author:y.z.string().optional(),description:y.z.string().max(1e3).min(10).optional(),ebook:y.z.array(j.SH).min(1).optional(),isPublic:y.z.boolean().optional(),rating:y.z.number().min(1).positive().optional(),picture:y.z.string().optional(),genres:y.z.array(k).min(1).optional()});var q=s(58133),f=s(48860),P=s(88735),w=s(43789);let N=()=>{let e=(0,f.useParams)(),t=(0,x.d)(e.slug),s=(0,g.NL)(),{control:y,reset:j,handleSubmit:k,formState:{errors:N,dirtyFields:_}}=(0,w.cI)({resolver:(0,m.F)(v)}),{data:z}=(0,h.a)({queryKey:["book-update-info",t],queryFn:()=>l.Z.book.adminInfoBySlug(t),select:e=>e.data}),{data:A}=(0,h.a)({queryKey:["stored-ebook",t],queryFn:()=>l.Z.ebook.storedEbookBySlug(t),select:e=>e.data}),{mutateAsync:D,isLoading:S}=(0,b.D)({mutationKey:["update-book"],mutationFn:e=>l.Z.book.update(t,e),onSuccess:async()=>{await s.invalidateQueries({queryKey:["book-update-info",t,"stored-ebook",t]})}});(0,P.useEffect)(()=>{z&&A&&j({title:z.title,description:z.description,author:z.author,rating:z.rating,genres:z.genres,picture:z.picture,ebook:A})},[j,z,t,A]);let E=k(async e=>{if(!Object.keys(u(_,e)).length)return(0,d.Jc)("Please fill some fields to update the book");await D(u(_,e))});return(console.log(_),z&&A)?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"mb-4 text-center text-3xl font-medium",children:["Update ",(0,r.jsx)("b",{children:z.title})," book"]}),(0,r.jsxs)("div",{className:"mb-4 justify-between gap-5  md:flex",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"mt-2  text-xl",children:"Cover"}),(0,r.jsx)(a.w,{name:"picture",control:y}),(0,r.jsx)("h1",{className:"my-1",children:"Genres"}),(0,r.jsx)(i.Z,{name:"genres",control:y}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"",children:"Visibility"}),(0,r.jsx)(n.zx,{size:"sm",className:(0,p.cn)("",z.isPublic?"bg-success":"bg-warning"),isLoading:S,onClick:async()=>{await D({isPublic:!z.isPublic})},children:z.isPublic?"Hide":"Show"})]})]})}),(0,r.jsxs)("div",{className:"w-11/12",children:[(0,r.jsxs)("div",{className:"mt-2 gap-3 md:flex",children:[(0,r.jsxs)("div",{className:" md:w-1/2",children:[(0,r.jsx)("h1",{className:"my-2",children:"Title"}),(0,r.jsx)(n.gN,{type:"text",control:y,name:"title",placeholder:"Title"})]}),(0,r.jsxs)("div",{className:" md:w-1/3",children:[(0,r.jsx)("h1",{className:"my-2",children:"Author"}),(0,r.jsx)(n.gN,{type:"text",icon:q.GH,control:y,name:"author",placeholder:"Author"})]}),(0,r.jsxs)("div",{className:"md:w-1/4",children:[(0,r.jsx)("h1",{className:"my-2",children:"Rating"}),(0,r.jsx)(n.gN,{icon:q.Ux,type:"number",control:y,name:"rating",placeholder:"Rating",min:1,max:5})]})]}),(0,r.jsx)("h1",{className:"my-2",children:"Description"}),(0,r.jsx)(n.ld,{control:y,name:"description",placeholder:"Enter description",className:"h-[240px]"})]})]}),(0,r.jsx)(o.Z,{control:y,name:"ebook"}),(0,r.jsx)(n.zx,{size:"sm",isLoading:S,className:"mt-4",variant:Object.keys(N).length>0?"danger":"foreground",onClick:E,children:"Update"})]}):(0,r.jsx)(c.Z,{})}},93927:(e,t,s)=>{"use strict";let r;s.r(t),s.d(t,{$$typeof:()=>p,__esModule:()=>l,default:()=>g,generateImageMetadata:()=>x,generateMetadata:()=>d,generateViewport:()=>m}),s(651);var o=s(75446),i=s(48692),a=s(87149),n=s(54580);let c=(0,s(48624).createProxy)(String.raw`D:\projects\booknex-2\apps\web\app\admin\book\[slug]\update\page.tsx`),{__esModule:l,$$typeof:p}=c,u=c.default;r="function"==typeof u?new Proxy(u,{apply:(e,t,s)=>{let r,c,l;try{let e=n.requestAsyncStorage.getStore();r=(0,o.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),c=(0,o.h)((0,i.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),l=(0,i.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return a.D(e,{componentRoute:"/admin/book/[slug]/update",componentType:"Unknown",sentryTraceHeader:r,baggageHeader:c,headers:l}).apply(t,s)}}):u;let d=void 0,x=void 0,m=void 0,g=r},67670:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.ZP,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>d,tree:()=>c});var r=s(18885),o=s(91163),i=s(99739),a=s(71717),n={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);s.d(t,n);let c=["",{children:["admin",{children:["book",{children:["[slug]",{children:["update",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93927)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\book\\[slug]\\update\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,12115)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,14693)),"D:\\projects\\booknex-2\\apps\\web\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,30992)),"D:\\projects\\booknex-2\\apps\\web\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,95316)),"D:\\projects\\booknex-2\\apps\\web\\app\\not-found.tsx"]}],l=["D:\\projects\\booknex-2\\apps\\web\\app\\admin\\book\\[slug]\\update\\page.tsx"],p="/admin/book/[slug]/update/page",u={require:s,loadChunk:()=>Promise.resolve()},d=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/book/[slug]/update/page",pathname:"/admin/book/[slug]/update",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},97784:(e,t,s)=>{Promise.resolve().then(s.bind(s,947))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[470,169,358,678,310,682,536,380,76],()=>s(67670));module.exports=r})();
//# sourceMappingURL=page.js.map