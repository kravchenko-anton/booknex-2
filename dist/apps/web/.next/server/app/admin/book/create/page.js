(()=>{var e={};e.id=398,e.ids=[398],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},32081:e=>{"use strict";e.exports=require("child_process")},67643:e=>{"use strict";e.exports=require("diagnostics_channel")},13639:e=>{"use strict";e.exports=require("domain")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},31405:e=>{"use strict";e.exports=require("inspector")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},46513:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P}),r(73363);var s=r(30494),o=r(37840),a=r(35026),n=r(63569),i=r(66240),c=r(32155),l=r(18193),p=r(49104),u=r(88735);let d=({templateSlug:e,reset:t})=>{let{data:r}=(0,l.a)({queryKey:["book-template"],queryFn:()=>i.Z.parser.bySlug(e),enabled:!!e,select:e=>e.data}),{mutateAsync:s}=(0,p.D)({mutationKey:["delete-template"],mutationFn:e=>i.Z.parser.remove(e),onError:()=>(0,c.Jc)("Error while removing template")});return(0,u.useLayoutEffect)(()=>{r&&t({title:r.title,description:r.description,author:r.author,rating:r.rating,genres:r.genres})},[t,r]),{deleteTemplate:s}};var m=r(67293),x=r(1789),g=r(90856),h=r(85545),b=r(40096);let y=h.z.object({slug:h.z.string(),name:h.z.string(),icon:h.z.string()}),j=h.z.object({title:h.z.string(),author:h.z.string(),description:h.z.string().max(1e3).min(10),ebook:h.z.array(b.SH).min(1),rating:h.z.number().min(1).positive(),picture:h.z.string(),genres:h.z.array(y).min(1)});var v=r(48860),q=r(43789);let k=()=>{let e=(0,v.useSearchParams)(),t=(0,x.d)(e.get("template")),r=(0,v.useRouter)(),{control:s,reset:o,watch:a,handleSubmit:n,setValue:l,getValues:u,formState:{errors:h}}=(0,q.cI)({resolver:(0,g.F)(j),mode:"onBlur"}),{deleteTemplate:b}=d({templateSlug:t,reset:o}),{mutateAsync:y,isLoading:k}=(0,p.D)({mutationKey:["create-book"],mutationFn:e=>i.Z.book.create(e),onSuccess:async e=>{console.log("data  in success",e),t&&await b(t),(0,c.Qm)("Book created"),r.push(m.M.bookCatalogRoute)}}),f=n(async e=>{await y(e)});return console.log(a("genres")),{watch:a,control:s,errors:h,setValue:l,reset:o,getValues:u,handleCreate:f,createLoading:k}};var f=r(85150),w=r(58133);let P=()=>{let{control:e,...t}=k();return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mb-4 text-center text-3xl font-medium",children:"Create book"}),(0,s.jsxs)("div",{className:"mb-4 justify-between gap-5  md:flex",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mt-2  text-xl",children:"Cover"}),(0,s.jsx)(n.w,{name:"picture",control:e}),(0,s.jsx)("h1",{className:"mb-2 mt-2  text-xl",children:"Genres"}),(0,s.jsx)(a.Z,{name:"genres",control:e})]})}),(0,s.jsxs)("div",{className:"w-11/12",children:[(0,s.jsxs)("div",{className:"mt-2  gap-3 md:flex",children:[(0,s.jsxs)("div",{className:" md:w-1/2",children:[(0,s.jsx)("h1",{className:"my-2",children:"Title"}),(0,s.jsx)(f.gN,{type:"text",control:e,name:"title",placeholder:"Title"})]}),(0,s.jsxs)("div",{className:" md:w-1/3",children:[(0,s.jsx)("h1",{className:"my-2",children:"Author"}),(0,s.jsx)(f.gN,{type:"text",icon:w.GH,control:e,name:"author",placeholder:"Author"})]}),(0,s.jsxs)("div",{className:"md:w-1/4",children:[(0,s.jsx)("h1",{className:"my-2",children:"Rating"}),(0,s.jsx)(f.gN,{icon:w.Ux,type:"number",control:e,name:"rating",placeholder:"Rating",min:1,max:5})]})]}),(0,s.jsx)("h1",{className:"mb-2 mt-4",children:"Description"}),(0,s.jsx)(f.ld,{control:e,name:"description",placeholder:"Enter description",className:"h-[250px]"})]})]}),(0,s.jsx)(o.Z,{control:e,name:"ebook"}),(0,s.jsx)(f.zx,{size:"md",isLoading:t.createLoading,className:"mt-4",variant:Object.keys(t.errors).length>0?"danger":"foreground",onClick:t.handleCreate,children:"Create"})]})}},84960:(e,t,r)=>{"use strict";let s;r.r(t),r.d(t,{$$typeof:()=>p,__esModule:()=>l,default:()=>g,generateImageMetadata:()=>m,generateMetadata:()=>d,generateViewport:()=>x}),r(651);var o=r(75446),a=r(48692),n=r(87149),i=r(54580);let c=(0,r(48624).createProxy)(String.raw`D:\projects\booknex-2\apps\web\app\admin\book\create\page.tsx`),{__esModule:l,$$typeof:p}=c,u=c.default;s="function"==typeof u?new Proxy(u,{apply:(e,t,r)=>{let s,c,l;try{let e=i.requestAsyncStorage.getStore();s=(0,o.h)((0,a.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),c=(0,o.h)((0,a.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),l=(0,a.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return n.D(e,{componentRoute:"/admin/book/create",componentType:"Unknown",sentryTraceHeader:s,baggageHeader:c,headers:l}).apply(t,r)}}):u;let d=void 0,m=void 0,x=void 0,g=s},39301:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.ZP,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>d,tree:()=>c});var s=r(18885),o=r(91163),a=r(99739),n=r(71717),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let c=["",{children:["admin",{children:["book",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,84960)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\book\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,12115)),"D:\\projects\\booknex-2\\apps\\web\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,14693)),"D:\\projects\\booknex-2\\apps\\web\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,30992)),"D:\\projects\\booknex-2\\apps\\web\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,95316)),"D:\\projects\\booknex-2\\apps\\web\\app\\not-found.tsx"]}],l=["D:\\projects\\booknex-2\\apps\\web\\app\\admin\\book\\create\\page.tsx"],p="/admin/book/create/page",u={require:r,loadChunk:()=>Promise.resolve()},d=new s.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/book/create/page",pathname:"/admin/book/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},22490:(e,t,r)=>{Promise.resolve().then(r.bind(r,46513))}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[162,169,358,678,310,682,536,380,76],()=>r(39301));module.exports=s})();
//# sourceMappingURL=page.js.map