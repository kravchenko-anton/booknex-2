{"version":3,"file":"76.js","mappings":"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","sources":["webpack:///./app/admin/book/_components/ebook-editor/trim-content-menu.tsx","webpack:///./app/admin/book/_components/ebook-editor/chapterNames.ts","webpack:///./app/admin/book/_components/ebook-editor/useBookCompose.ts","webpack:///./components/ui/error-message/error-message.tsx","webpack:///./app/admin/book/_components/ebook-editor/editor.tsx","webpack:///./components/ui/dialog.tsx","webpack:///./components/ui/command.tsx","webpack:///./app/admin/book/_components/select-genres.tsx","webpack:///./hooks/useFileUpload.ts","webpack:///./app/admin/book/_components/select-picture.tsx","webpack:///./components/ui/popover.tsx","webpack:///./utils/validate-parameter.ts","webpack:///../../libs/global/validation/book/ebook.payload.dto.ts","webpack:///<anon>"],"sourcesContent":["import { Button, Field } from '@/components/ui'\n\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger\n} from '@/components/ui/popover'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { Scissors } from 'icons'\nimport { FC } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { z } from 'zod'\n\ninterface TrimContentButtonProperties {\n\tonSubmit: (data: parseValidationType) => void\n}\n\nconst trimValidation = z.object({\n\tstartLine: z.number().int(),\n\tendLine: z.number().int()\n})\n\ntype parseValidationType = z.infer<typeof trimValidation>\n\nexport const TrimContentMenu: FC<TrimContentButtonProperties> = ({\n\tonSubmit\n}) => {\n\tconst { control, handleSubmit } = useForm<parseValidationType>({\n\t\tresolver: zodResolver(trimValidation)\n\t})\n\n\treturn (\n\t\t<Popover>\n\t\t\t<PopoverTrigger>\n\t\t\t\t<Scissors\n\t\t\t\t\twidth={33}\n\t\t\t\t\theight={33}\n\t\t\t\t\tclassName='bg-muted border-bordered h-full w-[35px] cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t/>\n\t\t\t</PopoverTrigger>\n\n\t\t\t<PopoverContent className='p-4'>\n\t\t\t\t<div className='space-y-2'>\n\t\t\t\t\t<h4 className='font-medium leading-none'>Trim text</h4>\n\t\t\t\t\t<p className='text-muted-foreground pb-2 text-sm'>\n\t\t\t\t\t\tTrim text from start to end line\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<Field\n\t\t\t\t\tvariant='muted'\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\ttype='number'\n\t\t\t\t\tname={'startLine'}\n\t\t\t\t\tplaceholder={'Start line'}\n\t\t\t\t/>\n\n\t\t\t\t<Field\n\t\t\t\t\tvariant='muted'\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tclassName='my-2'\n\t\t\t\t\tname={'endLine'}\n\t\t\t\t\ttype='number'\n\t\t\t\t\tplaceholder={'end line'}\n\t\t\t\t/>\n\t\t\t\t<Button variant='primary' size={'sm'} onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\tTrim content\n\t\t\t\t</Button>\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t)\n}\n","export const chapterNames = [\n\t'One',\n\t'Two',\n\t'Three',\n\t'Four',\n\t'Five',\n\t'Six',\n\t'Seven',\n\t'Eight',\n\t'Nine',\n\t'Ten',\n\t'Eleven',\n\t'Twelve',\n\t'Thirteen',\n\t'Fourteen',\n\t'Fifteen',\n\t'Sixteen',\n\t'Seventeen',\n\t'Eighteen',\n\t'Nineteen',\n\t'Twenty',\n\t'Twenty-one',\n\t'Twenty-two',\n\t'Twenty-three',\n\t'Twenty-four',\n\t'Twenty-five',\n\t'Twenty-six',\n\t'Twenty-seven',\n\t'Twenty-eight',\n\t'Twenty-nine',\n\t'Thirty',\n\t'Thirty-one',\n\t'Thirty-two',\n\t'Thirty-three',\n\t'Thirty-four',\n\t'Thirty-five',\n\t'Thirty-six',\n\t'Thirty-seven',\n\t'Thirty-eight',\n\t'Thirty-nine',\n\t'Forty',\n\t'Forty-one',\n\t'Forty-two',\n\t'Forty-three',\n\t'Forty-four',\n\t'Forty-five',\n\t'Forty-six',\n\t'Forty-seven',\n\t'Forty-eight',\n\t'Forty-nine',\n\t'Fifty',\n\t'Fifty-one',\n\t'Fifty-two',\n\t'Fifty-three',\n\t'Fifty-four',\n\t'Fifty-five',\n\t'Fifty-six',\n\t'Fifty-seven',\n\t'Fifty-eight',\n\t'Fifty-nine',\n\t'Sixty',\n\t'Sixty-one',\n\t'Sixty-two',\n\t'Sixty-three',\n\t'Sixty-four',\n\t'Sixty-five',\n\t'Sixty-six',\n\t'Sixty-seven',\n\t'Sixty-eight',\n\t'Sixty-nine',\n\t'Seventy',\n\t'Seventy-one',\n\t'Seventy-two',\n\t'Seventy-three',\n\t'Seventy-four',\n\t'Seventy-five',\n\t'Seventy-six',\n\t'Seventy-seven',\n\t'Seventy-eight',\n\t'Seventy-nine',\n\t'Eighty',\n\t'Eighty-one',\n\t'Eighty-two',\n\t'Eighty-three',\n\t'Eighty-four',\n\t'Eighty-five',\n\t'Eighty-six',\n\t'Eighty-seven',\n\t'Eighty-eight',\n\t'Eighty-nine',\n\t'Ninety',\n\t'Ninety-one',\n\t'Ninety-two',\n\t'Ninety-three',\n\t'Ninety-four',\n\n\t'Ninety-five',\n\t'Ninety-six',\n\t'Ninety-seven',\n\t'Ninety-eight',\n\t'Ninety-nine',\n\t'One hundred',\n\t'One hundred and one',\n\t'One hundred and two',\n\t'One hundred and three',\n\t'One hundred and four',\n\t'One hundred and five',\n\t'One hundred and six'\n]\n","import { chapterNames } from '@/app/admin/book/_components/ebook-editor/chapterNames'\nimport api from '@/services/api'\nimport { errorToast, successToast } from '@/utils/toast'\nimport { useMutation } from '@tanstack/react-query'\nimport { EBookPayloadType } from 'global/validation/book/ebook.payload.dto'\n\nexport const useBookCompose = ({\n\tebooks: ebooks,\n\tsetEBooks: setEBooks\n}: {\n\tebooks: EBookPayloadType[] | undefined\n\tsetEBooks: (books: EBookPayloadType[]) => void\n}) => {\n\tconst { mutateAsync: unfold, isLoading: unfoldLoading } = useMutation({\n\t\tmutationKey: ['unfold'],\n\n\t\tmutationFn: (file: File) => api.parser.unfold(file),\n\t\tonSuccess: () => successToast('File uploaded'),\n\t\tonError: () => errorToast('Error while uploading book')\n\t})\n\n\tconst deleteBook = ({ bookId }: { bookId: number }) => {\n\t\tif (!ebooks) return errorToast('Error deleting book')\n\t\tsetEBooks(ebooks?.filter(book => book.id !== bookId))\n\t\tsuccessToast('Book deleted')\n\t}\n\n\tconst trimmingEBookContent = ({\n\t\tbookId,\n\t\tstartLine,\n\t\tendLine\n\t}: {\n\t\tbookId: number\n\t\tstartLine: number\n\t\tendLine: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error trimming book')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map(({ id, name, text }) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\ttext: text\n\t\t\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(_, index) => index < startLine - 1 || index > endLine - 1\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t\tsuccessToast('Book trimmed')\n\t}\n\n\tconst generateChapterNames = ({ bookId }: { bookId: number }) => {\n\t\tif (!ebooks) return errorToast('Error generating chapter names')\n\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map((content, index) => ({\n\t\t\t\t\t\t\t...content,\n\n\t\t\t\t\t\t\tname: `Chapter ${chapterNames[index]}`\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\tconst addNewCharacterAfterContent = ({\n\t\tbookId,\n\t\tchapterId\n\t}: {\n\t\tbookId: number\n\t\tchapterId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error adding new chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\tconst index = book.chapters.findIndex(\n\t\t\t\t\t\tcontent => content.id === chapterId\n\t\t\t\t\t)\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: [\n\t\t\t\t\t\t\t...book.chapters.slice(0, index + 1),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: Math.round(Math.random() * 1_000_000),\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...book.chapters.slice(index + 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\tconst moveChaptersToNewBook = ({\n\t\tbookId,\n\t\tchapterId\n\t}: {\n\t\tbookId: number\n\t\tchapterId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error moving chapters')\n\t\tconst book = ebooks.find(book => book.id === bookId)\n\t\tif (!book) return ebooks\n\t\tconst index = book.chapters.findIndex(content => content.id === chapterId)\n\t\tif (index <= 1) return errorToast('Error moving chapters')\n\t\tconst chapters = book.chapters.slice(index)\n\t\tconst oldBookChapters = book.chapters.filter(\n\t\t\tcontent => !chapters.some(chapter => chapter.id === content.id)\n\t\t)\n\t\tconst newBook = {\n\t\t\tid: ebooks.length + 1,\n\t\t\ttitle: `${ebooks.length + 1} book`,\n\t\t\tchapters\n\t\t}\n\t\treturn setEBooks([\n\t\t\t...ebooks.map(book =>\n\t\t\t\tbook.id === bookId ? { ...book, chapters: oldBookChapters } : book\n\t\t\t),\n\t\t\tnewBook\n\t\t])\n\t}\n\n\tconst mergeContentWithTopCharacter = ({\n\t\tbookId,\n\t\ttopChapterId,\n\t\tinsertedContent\n\t}: {\n\t\tbookId: number\n\t\ttopChapterId: number\n\t\tinsertedContent: string\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error merging content')\n\t\treturn setEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\tconst element = book.chapters.find(\n\t\t\t\t\t\tcontent => content.id === topChapterId\n\t\t\t\t\t)\n\t\t\t\t\tconst index = book.chapters.findIndex(\n\t\t\t\t\t\tcontent => content.id === topChapterId\n\t\t\t\t\t)\n\t\t\t\t\tif (!element) {\n\t\t\t\t\t\terrorToast('Error merging content')\n\t\t\t\t\t\treturn book\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: [\n\t\t\t\t\t\t\t...book.chapters.slice(0, index),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: element.id,\n\t\t\t\t\t\t\t\tname: element.name,\n\t\t\t\t\t\t\t\ttext: `${element.text}\\n${insertedContent}`\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...book.chapters.slice(index + 1)\n\t\t\t\t\t\t].filter(content => content.text !== insertedContent)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst updateBookTitle = ({\n\t\tvalue,\n\t\tbookId\n\t}: {\n\t\tvalue: string\n\t\tbookId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error updating book title')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\ttitle: value\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst removeChapter = (bookId: number, removedId: number) => {\n\t\tif (!ebooks) return errorToast('Error removing chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.filter(content => content.id !== removedId)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t\tsuccessToast('Chapter removed')\n\t}\n\n\tconst updateChapter = ({\n\t\tchapterId,\n\t\tbookId,\n\t\tvalue\n\t}: {\n\t\tchapterId: number\n\t\tbookId: number\n\t\tvalue: {\n\t\t\tname?: string\n\t\t\ttext?: string\n\t\t}\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error updating chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map(chapter => {\n\t\t\t\t\t\t\tif (chapter.id === chapterId) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...chapter,\n\t\t\t\t\t\t\t\t\t...value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn chapter\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst upload = ({\n\t\ttitle,\n\t\tchapters\n\t}: {\n\t\ttitle: string\n\t\tchapters: {\n\t\t\tid: number\n\t\t\tname: string\n\t\t\ttext: string\n\t\t}[]\n\t}) => {\n\t\tconst elementIndex = ebooks?.length || 0\n\n\t\tsetEBooks([\n\t\t\t...(ebooks || []),\n\t\t\t{\n\t\t\t\tid: elementIndex + 1,\n\t\t\t\ttitle: title || '',\n\t\t\t\tchapters: chapters || []\n\t\t\t}\n\t\t])\n\t\tsuccessToast('Book uploaded')\n\t}\n\n\tconst unfoldWithUpload = (files: File[]) => {\n\t\tfor (const file of files) {\n\t\t\tunfold(new File([file], file.name)).then(({ data: chapters }) => {\n\t\t\t\tupload({\n\t\t\t\t\ttitle: file.name,\n\t\t\t\t\tchapters\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\treturn {\n\t\tbooks: {\n\t\t\tupload: unfoldWithUpload,\n\t\t\tstate: ebooks || [],\n\t\t\tunfoldLoading,\n\t\t\ttrimmingEBookContent,\n\t\t\tgenerateChapterNames,\n\t\t\taddNewCharacterAfterContent,\n\t\t\tdelete: deleteBook,\n\t\t\tupdateToc: updateChapter,\n\t\t\tupdateBookTitle,\n\t\t\tmergeContentWithTopCharacter,\n\t\t\tremoveToc: removeChapter,\n\t\t\tmoveChaptersToNewBook\n\t\t}\n\t}\n}\n","import { FC, memo } from 'react'\n\nconst ErrorMessage: FC<{ message: any }> = ({ message }) => {\n\tif (typeof message === 'string') {\n\t\treturn <p className='text-danger mt-0.5 text-xs italic'>{message}</p>\n\t}\n\tif (message?.message) {\n\t\treturn (\n\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{message.message}</p>\n\t\t)\n\t}\n\n\treturn null\n}\n\nexport default memo(ErrorMessage)\n","import { TrimContentMenu } from '@/app/admin/book/_components/ebook-editor/trim-content-menu'\nimport { useBookCompose } from '@/app/admin/book/_components/ebook-editor/useBookCompose'\nimport { DropZone, Input, TextArea } from '@/components/ui'\nimport ErrorMessage from '@/components/ui/error-message/error-message'\nimport { errorToast } from '@/utils/toast'\nimport { BaseFieldProperties } from 'global/types'\nimport { CaseSensitive, ChevronDown, ChevronUp, Close, Combine } from 'icons'\nimport { Controller } from 'react-hook-form'\n\nconst EbookComposer = <T extends Record<string, any>>({\n\tcontrol,\n\tname\n}: BaseFieldProperties<T>) => (\n\t<Controller\n\t\tcontrol={control}\n\t\tname={name}\n\t\trender={({ field: { value = [], onChange }, fieldState: { error } }) => {\n\t\t\tconst { books } = useBookCompose({\n\t\t\t\tebooks: value,\n\t\t\t\tsetEBooks: onChange\n\t\t\t})\n\t\t\tconsole.log('errors', error)\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<div className='md:w-max md:overflow-y-scroll '>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className='mb-4'>\n\t\t\t\t\t\t\t\t<h1 className='mt-2  text-xl'>Book file</h1>\n\t\t\t\t\t\t\t\t<DropZone\n\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\tsize='sm'\n\t\t\t\t\t\t\t\t\taccept='.epub'\n\t\t\t\t\t\t\t\t\tdisabled={books.unfoldLoading}\n\t\t\t\t\t\t\t\t\tonDropFile={files => {\n\t\t\t\t\t\t\t\t\t\tbooks.upload(files)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonFileDelete={(_file, index) => {\n\t\t\t\t\t\t\t\t\t\tbooks.delete({\n\t\t\t\t\t\t\t\t\t\t\tbookId: Number(books.state[index]?.id)\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='md:flex md:w-fit'>\n\t\t\t\t\t\t\t\t{books.state.map((book, bookIndex) => {\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tconst bookError = error?.[bookIndex]\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={book.title}\n\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered mb-4 w-full rounded border-[1px] p-2 pt-4 md:mr-1 md:w-[600px]'>\n\t\t\t\t\t\t\t\t\t\t\t<div className='mb-2 flex h-9 items-center  justify-between gap-1'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='muted'\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mr-2 h-full w-full flex-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={event =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateBookTitle({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage message={bookError?.title?.message} />\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TrimContentMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={data => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.trimmingEBookContent({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartLine: data.startLine,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tendLine: data.endLine\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseSensitive\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={33}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={33}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-muted border-bordered h-full w-[35px] cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.generateChapterNames({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('generate chapters names')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{book.chapters.map((chapter, chapterIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst chapterError = bookError?.chapters?.[chapterIndex]\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={chapter.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-muted mb-2 rounded p-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='mb-2 flex w-full items-center justify-between gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='foreground'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={chapter.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateToc({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={chapterError?.name?.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronUp\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!book.chapters[chapterIndex - 1]?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn errorToast(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Cannot move chapter up'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.mergeContentWithTopCharacter({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinsertedContent: chapter.text,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttopChapterId: Number(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.chapters[chapterIndex - 1]?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronDown\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.addNewCharacterAfterContent({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('add new character')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Combine\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('combine')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.moveChaptersToNewBook({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Close\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.removeToc(book.id, chapter.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('remove toc')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={chapter.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='foreground'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=' min-h-[250px] w-full rounded px-4 py-2 font-mono text-sm duration-200 ease-linear'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateToc({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={chapterError?.text?.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)\n\t\t}}\n\t/>\n)\n\nexport default EbookComposer\n","'use client'\n\nimport { cn } from '@/utils'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { Close } from 'icons'\nimport type {\n\tComponentPropsWithoutRef,\n\tElementRef,\n\tHTMLAttributes\n} from 'react'\nimport { forwardRef } from 'react'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogOverlay = forwardRef<\n\tElementRef<typeof DialogPrimitive.Overlay>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Overlay\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = forwardRef<\n\tElementRef<typeof DialogPrimitive.Content>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...properties }, reference) => (\n\t<DialogPortal>\n\t\t<DialogOverlay />\n\t\t<DialogPrimitive.Content\n\t\t\tref={reference}\n\t\t\tclassName={cn(\n\t\t\t\t'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...properties}>\n\t\t\t{children}\n\t\t\t<DialogPrimitive.Close className='ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none'>\n\t\t\t\t<Close className='h-4 w-4' />\n\t\t\t\t<span className='sr-only'>Close</span>\n\t\t\t</DialogPrimitive.Close>\n\t\t</DialogPrimitive.Content>\n\t</DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLDivElement>) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t'flex flex-col space-y-1.5 text-center sm:text-left',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLDivElement>) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = forwardRef<\n\tElementRef<typeof DialogPrimitive.Title>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Title\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'text-lg font-semibold leading-none tracking-tight',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = forwardRef<\n\tElementRef<typeof DialogPrimitive.Description>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Description\n\t\tref={reference}\n\t\tclassName={cn('text-muted-foreground text-sm', className)}\n\t\t{...properties}\n\t/>\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogOverlay,\n\tDialogPortal,\n\tDialogTitle\n}\n","'use client'\n\nimport { Dialog, DialogContent } from '@/components/ui/dialog'\nimport { cn } from '@/utils'\n\nimport type { DialogProps } from '@radix-ui/react-dialog'\nimport { Command as CommandPrimitive } from 'cmdk'\nimport { Search } from 'icons'\nimport type {\n\tComponentPropsWithoutRef,\n\tElementRef,\n\tHTMLAttributes\n} from 'react'\nimport { forwardRef } from 'react'\n\nconst Command = forwardRef<\n\tElementRef<typeof CommandPrimitive>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'bg-foreground text-gray flex h-full w-full flex-col overflow-hidden rounded',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommand.displayName = CommandPrimitive.displayName\n\ntype CommandDialogProperties = DialogProps\n\nconst CommandDialog = ({\n\tchildren,\n\t...properties\n}: CommandDialogProperties) => (\n\t<Dialog {...properties}>\n\t\t<DialogContent className='overflow-hidden p-0'>\n\t\t\t<Command className='[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-white [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5'>\n\t\t\t\t{children}\n\t\t\t</Command>\n\t\t</DialogContent>\n\t</Dialog>\n)\n\nconst CommandInput = forwardRef<\n\tElementRef<typeof CommandPrimitive.Input>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...properties }, reference) => (\n\t<div className='border-bordered flex items-center border-b px-3'>\n\t\t<Search className='mr-2 h-4 w-4 shrink-0 opacity-50' />\n\t\t<CommandPrimitive.Input\n\t\t\tref={reference}\n\t\t\tclassName={cn(\n\t\t\t\t'flex h-10 w-full rounded bg-transparent py-3 text-sm outline-none placeholder:text-white disabled:cursor-not-allowed disabled:opacity-50',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...properties}\n\t\t/>\n\t</div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = forwardRef<\n\tElementRef<typeof CommandPrimitive.List>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.List\n\t\tref={reference}\n\t\tclassName={cn('max-h-[300px] overflow-y-auto overflow-x-hidden', className)}\n\t\t{...properties}\n\t/>\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = forwardRef<\n\tElementRef<typeof CommandPrimitive.Empty>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((properties, reference) => (\n\t<CommandPrimitive.Empty\n\t\tref={reference}\n\t\tclassName='py-6 text-center text-sm'\n\t\t{...properties}\n\t/>\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = forwardRef<\n\tElementRef<typeof CommandPrimitive.Group>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Group\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'text-gray overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-white',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = forwardRef<\n\tElementRef<typeof CommandPrimitive.Separator>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Separator\n\t\tref={reference}\n\t\tclassName={cn('bg-bordered -mx-1 h-px', className)}\n\t\t{...properties}\n\t/>\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = forwardRef<\n\tElementRef<typeof CommandPrimitive.Item>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Item\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'aria-selected:bg-muted aria-selected:text-gray relative flex cursor-default select-none items-center rounded px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLSpanElement>) => (\n\t<span\n\t\tclassName={cn('text-gray ml-auto text-xs tracking-widest', className)}\n\t\t{...properties}\n\t/>\n)\nCommandShortcut.displayName = 'CommandShortcut'\n\nexport {\n\tCommand,\n\tCommandDialog,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem,\n\tCommandList,\n\tCommandSeparator,\n\tCommandShortcut\n}\n","import {\n\tCommand,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem\n} from '@/components/ui/command'\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger\n} from '@/components/ui/popover'\nimport api from '@/services/api'\nimport { cn } from '@/utils'\nimport { useQuery } from '@tanstack/react-query'\nimport { ShortGenre } from 'global/api-client'\nimport { Color } from 'global/colors'\nimport { BaseFieldProperties } from 'global/types'\nimport { Check } from 'icons'\n\nimport { Controller } from 'react-hook-form'\n\nconst SelectGenres = <T extends Record<string, any>>({\n\tcontrol,\n\tname,\n\t...properties\n}: BaseFieldProperties<T>) => {\n\tconst { data: genres = [] } = useQuery({\n\t\tqueryKey: ['genres'],\n\t\tqueryFn: () => api.genre.catalog(),\n\t\tselect: data => data.data\n\t})\n\tconsole.log('genres', genres)\n\treturn (\n\t\t<Controller\n\t\t\tcontrol={control}\n\t\t\tname={name}\n\t\t\trender={({\n\t\t\t\tfield: { value = [] as ShortGenre[], onChange: setGenre },\n\t\t\t\tfieldState: { error }\n\t\t\t}) => {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Popover>\n\t\t\t\t\t\t\t\t<PopoverTrigger className='w-full'>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t'border-bordered bg-foreground  rounded border-[1px] px-2 py-1'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{...properties}>\n\t\t\t\t\t\t\t\t\t\t<div className='flex max-w-xl flex-nowrap gap-2 overflow-hidden'>\n\t\t\t\t\t\t\t\t\t\t\t{value.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(({ slug }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={slug}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenres.find(genre => genre.slug === slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t: 'No genre selected'}{' '}\n\t\t\t\t\t\t\t\t\t\t\t{value.length - 2 > 0 && `(${value.length - 2})`}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</PopoverTrigger>\n\n\t\t\t\t\t\t\t\t<PopoverContent className=' p-0'>\n\t\t\t\t\t\t\t\t\t<Command>\n\t\t\t\t\t\t\t\t\t\t<CommandInput placeholder='Search genre...' />\n\t\t\t\t\t\t\t\t\t\t<CommandEmpty>No genre found.</CommandEmpty>\n\t\t\t\t\t\t\t\t\t\t<CommandGroup>\n\t\t\t\t\t\t\t\t\t\t\t{genres.map(genre => (\n\t\t\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={genre.slug}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={genre.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGenre(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.find(({ slug }) => slug === genre.slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({ slug }) => slug !== genre.slug\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [...value, genre]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={Color.white}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'mr-2 h-4 w-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBoolean(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.find(({ slug }) => slug === genre.slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'opacity-100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{genre.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t\t\t\t</Command>\n\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!!error && (\n\t\t\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>\n\t\t\t\t\t\t\t\t{error.message}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t}}\n\t\t/>\n\t)\n}\n\nexport default SelectGenres\n","import api from '@/services/api'\nimport { errorToast } from '@/utils/toast'\nimport { useMutation } from '@tanstack/react-query'\nimport { StorageFolderType } from 'global/helpers/storage-types'\n\ninterface UploadFileProperties {\n\tfolder: StorageFolderType\n\tfile: File\n}\n\nexport const useUploadFile = () => {\n\tconst { mutateAsync: upload, isLoading: uploadLoading } = useMutation({\n\t\tmutationKey: ['upload-file'],\n\t\tmutationFn: ({ folder, file }: UploadFileProperties) =>\n\t\t\tapi.storage.upload(folder, file),\n\t\tonError: () =>\n\t\t\terrorToast({\n\t\t\t\ttext1: 'Upload file',\n\t\t\t\ttext2: 'An error occurred',\n\t\t\t\ttype: 'error'\n\t\t\t})\n\t})\n\n\treturn {\n\t\tupload,\n\t\tuploadLoading\n\t}\n}\n","import { useUploadFile } from '@/hooks/useFileUpload'\nimport { getFileUrl } from 'global/api-config'\nimport { BaseFieldProperties } from 'global/types'\nimport { Controller } from 'react-hook-form'\n\nexport const SelectPicture = <T extends Record<string, any>>({\n\tcontrol,\n\tname\n}: BaseFieldProperties<T>) => {\n\tconst { upload, uploadLoading } = useUploadFile()\n\treturn (\n\t\t<Controller\n\t\t\tcontrol={control}\n\t\t\tname={name}\n\t\t\trender={({\n\t\t\t\tfield: { value = '', onChange: setPicture },\n\t\t\t\tfieldState: { error }\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\t\tclassName='hidden'\n\t\t\t\t\t\t\t\tdisabled={uploadLoading}\n\t\t\t\t\t\t\t\tonChange={async ({ target }) => {\n\t\t\t\t\t\t\t\t\tconst file = target.files?.[0]\n\n\t\t\t\t\t\t\t\t\tif (!file) return\n\t\t\t\t\t\t\t\t\tupload({\n\t\t\t\t\t\t\t\t\t\tfile,\n\t\t\t\t\t\t\t\t\t\tfolder: 'booksCovers'\n\t\t\t\t\t\t\t\t\t}).then(response => {\n\t\t\t\t\t\t\t\t\t\tsetPicture(response.data.name)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\twidth={220}\n\t\t\t\t\t\t\t\tclassName='border-bordered  cursor-pointer rounded border-[1px]'\n\t\t\t\t\t\t\t\theight={300}\n\t\t\t\t\t\t\t\tsrc={getFileUrl(value)}\n\t\t\t\t\t\t\t\talt='Cover'\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst element: HTMLElement | null =\n\t\t\t\t\t\t\t\t\t\tdocument.querySelector('input[type=file]')\n\t\t\t\t\t\t\t\t\telement?.click()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!!error && (\n\t\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{error.message}</p>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t/>\n\t)\n}\n","'use client'\n\nimport { cn } from '@/utils'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\nimport type { ComponentPropsWithoutRef, ElementRef } from 'react'\nimport { forwardRef } from 'react'\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = forwardRef<\n\tElementRef<typeof PopoverPrimitive.Content>,\n\tComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(\n\t(\n\t\t{ className, align = 'center', sideOffset = 4, ...properties },\n\t\treference\n\t) => (\n\t\t<PopoverPrimitive.Portal>\n\t\t\t<PopoverPrimitive.Content\n\t\t\t\tref={reference}\n\t\t\t\talign={align}\n\t\t\t\tsideOffset={sideOffset}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'bg-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border-bordered z-50 w-72 rounded border  p-4 text-white shadow-md outline-none',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t\t{...properties}\n\t\t\t/>\n\t\t</PopoverPrimitive.Portal>\n\t)\n)\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverAnchor, PopoverContent, PopoverTrigger }\n","//TODO: проверить во всех вариантах валидацию\nexport const validateNumberParameter = (parameter: any): number => {\n\tif (!parameter) return 0\n\tif (parameter < 0 || parameter > 10_000) throw new Error('Invalid parameter')\n\n\treturn +parameter\n}\n\nexport const validateStringParameter = (parameter: any): string => {\n\tif (!parameter) return ''\n\tif (typeof parameter !== 'string') throw new Error('Invalid parameter')\n\treturn parameter\n}\n","import { z } from 'zod'\n\nexport const EBookBaseSchema = z.object({\n\tid: z.number().min(1),\n\ttitle: z\n\t\t.string()\n\t\t.max(100)\n\t\t.min(3)\n\t\t.refine(value => value !== 'undefined', {\n\t\t\tmessage: 'Name cannot be empty'\n\t\t})\n\t\t.refine(value => !value.includes('.epub'), {\n\t\t\tmessage: 'Title cannot include .epub'\n\t\t})\n})\n\nexport const ChapterPayloadSchema = z.object({\n\tid: z.number().min(1),\n\tname: z\n\t\t.string()\n\t\t.refine(value => !value.includes('.epub'), {\n\t\t\tmessage: 'Name cannot include .epub'\n\t\t})\n\t\t.refine(value => value !== 'undefined', {\n\t\t\tmessage: 'Name cannot be empty'\n\t\t}),\n\ttext: z.string().refine(\n\t\tvalue => {\n\t\t\tconst regex = /<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)<\\/\\1>/\n\t\t\treturn regex.test(value)\n\t\t},\n\t\t{\n\t\t\tmessage: 'Text should be in HTML format'\n\t\t}\n\t)\n})\n\nexport const EBookPayloadSchema = z\n\t.object({\n\t\tchapters: z.array(ChapterPayloadSchema).min(1)\n\t})\n\t.merge(EBookBaseSchema)\n\nexport type EBookPayloadType = z.infer<typeof EBookPayloadSchema>\n"],"names":["trimValidation","z","object","startLine","number","int","endLine","TrimContentMenu","onSubmit","control","handleSubmit","useForm","resolver","zodResolver","react_jsx_runtime","jsxs","Popover","jsx","PopoverTrigger","Scissors","width","height","className","PopoverContent","div","h4","p","Field","variant","type","name","placeholder","Button","size","onClick","chapterNames","useBookCompose","ebooks","setEBooks","mutateAsync","unfold","isLoading","unfoldLoading","useMutation","mutationKey","mutationFn","api","parser","file","onSuccess","successToast","onError","errorToast","upload","title","chapters","elementIndex","length","id","books","files","File","then","data","state","trimmingEBookContent","bookId","map","book","text","split","filter","_","index","join","generateChapterNames","content","addNewCharacterAfterContent","chapterId","findIndex","slice","Math","round","random","delete","updateToc","value","chapter","updateBookTitle","mergeContentWithTopCharacter","topChapterId","insertedContent","element","find","removeToc","removedId","moveChaptersToNewBook","oldBookChapters","some","newBook","error_message","memo","message","editor","Controller","render","field","onChange","fieldState","error","console","log","Fragment","h1","DropZone","multiple","accept","disabled","onDropFile","onFileDelete","_file","Number","bookIndex","bookError","Input","defaultValue","onBlur","event","target","ErrorMessage","CaseSensitive","chapterIndex","chapterError","ChevronUp","ChevronDown","Combine","Close","TextArea","DialogPrimitive","DialogPortal","DialogOverlay","forwardRef","properties","reference","ref","cn","displayName","DialogContent","children","span","DialogTitle","DialogDescription","Command","CommandPrimitive","CommandInput","Search","CommandList","List","CommandEmpty","Empty","CommandGroup","Group","CommandSeparator","Separator","CommandItem","Item","select_genres","genres","useQuery","queryKey","queryFn","genre","catalog","select","setGenre","slug","onSelect","Check","color","Color","white","Boolean","useUploadFile","uploadLoading","folder","storage","text1","text2","SelectPicture","setPicture","input","response","img","src","getFileUrl","alt","document","querySelector","click","PopoverPrimitive","align","sideOffset","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","validateNumberParameter","parameter","validateStringParameter","EBookBaseSchema","min","string","max","refine","includes","ChapterPayloadSchema","regex","test","EBookPayloadSchema","array","merge"],"sourceRoot":""}