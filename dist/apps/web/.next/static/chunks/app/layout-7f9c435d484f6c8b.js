(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{98213:function(e,t,o){Promise.resolve().then(o.bind(o,55543)),Promise.resolve().then(o.t.bind(o,17963,23)),Promise.resolve().then(o.t.bind(o,25070,23))},55543:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return v}});var r=o(27573),n=o(71095);let s=e=>{let{...t}=e;return(0,r.jsx)(n.x,{className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-foreground group-[.toaster]:text-white group-[.toaster]:border-bordered group-[.toaster]:shadow-lg",description:"group-[.toast]:text-gray",actionButton:"group-[.toast]:bg-muted group-[.toast]:text-white",cancelButton:"group-[.toast]:bg-danger group-[.toast]:text-white"}},...t})};var a=o(96604),i=o(34293);let u=e=>t=>o=>((0,i.h_)(o)&&(console.log(e),(0,a.Jc)(o.payload)),t(o));var l=o(29657),c=o(11038),g=o(30387);let{reducer:d,actions:h}=(0,i.oM)({name:"auth",initialState:{isLoading:!1,user:null},reducers:{},extraReducers:e=>{e.addCase(g.mailLogin.pending,e=>{e.isLoading=!0}).addCase(g.mailLogin.fulfilled,(e,t)=>{let{payload:o}=t;e.isLoading=!1,e.user=o.user}).addCase(g.mailLogin.rejected,e=>{e.isLoading=!1,e.user=null}).addCase(g.googleLogin.pending,e=>{e.isLoading=!0}).addCase(g.googleLogin.fulfilled,(e,t)=>{let{payload:o}=t;e.isLoading=!1,e.user=o.user}).addCase(g.googleLogin.rejected,e=>{e.isLoading=!1,e.user=null}).addCase(g.logout.fulfilled,e=>{e.isLoading=!1,e.user=null})}}),f=(0,o(47391).UY)({auth:d}),p={key:"root",storage:c.Z,whitelist:["auth","parser"]},m=(0,l.OJ)(p,f),L=(0,i.xC)({reducer:m,middleware:e=>e({serializableCheck:!1}).concat(u)}),k=(0,l.p5)(L);var w=o(3177),x=o(1178),j=o(84983),C=o(1500),b=o(61929),y=o(13474),v=e=>{let{children:t}=e,o=new x.S({defaultOptions:{queries:{refetchOnWindowFocus:!1,cacheTime:864e5}}}),n="390949311214-hqfqvic7p47pt3elpne00es58k99nonh.apps.googleusercontent.com";if(!n)throw Error("".concat(C.eI.somethingWrong,", ").concat(C.fe.someConfigMissing));return(0,r.jsx)(b.zt,{store:L,children:(0,r.jsx)(y.r,{persistor:k,children:(0,r.jsx)(j.aH,{client:o,children:(0,r.jsxs)(w.rg,{clientId:n,children:[t,(0,r.jsx)(s,{})]})})})})}},30387:function(e,t,o){"use strict";o.r(t),o.d(t,{googleLogin:function(){return l},logout:function(){return c},mailLogin:function(){return u}});var r=o(28603),n=o(96604),s=o(34293),a=o(1500),i=o(48196);let u=(0,s.hg)("auth/mailLogin",async(e,t)=>{let{email:o,password:s}=e;try{let{data:e}=await r.Z.auth.mailLogin({email:o,password:s});if(console.log(e),"admin"!==e.user.role)return t.rejectWithValue("You are not admin");return(0,i.Jp)({accessToken:e.accessToken,refreshToken:e.refreshToken}),(0,n.Qm)("Login successfully"),e}catch(e){return(0,n.Jc)(e),t.rejectWithValue(e)}}),l=(0,s.hg)("auth/googleLogin",async(e,t)=>{let{socialId:o}=e;try{let{data:e}=await r.Z.auth.googleSign({socialId:o});if(console.log(e),"admin"!==e.user.role)return t.rejectWithValue(a.eI.somethingWrong);return(0,i.Jp)({accessToken:e.accessToken,refreshToken:e.refreshToken}),(0,n.Qm)("Login successfully"),e}catch(e){return(0,n.Jc)(e),t.rejectWithValue(e)}}),c=(0,s.hg)("auth/logout",()=>{try{(0,i.wq)()}catch(e){(0,n.Jc)(e)}return{}})},25070:function(){}},function(e){e.O(0,[201,382,192,174,63,747,362,677,744],function(){return e(e.s=98213)}),_N_E=e.O()}]);