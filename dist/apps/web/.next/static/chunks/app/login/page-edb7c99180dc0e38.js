(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{92350:function(e,r,t){Promise.resolve().then(t.bind(t,44573))},44573:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var o=t(27573),n=t(82961),a=t(70729),l=t(69184),d=t(47935),s=t(3177),i=t(90642),c=t(68444);(0,i.extendZodWithOpenApi)(c.z);let u=c.z.object({email:c.z.string().email(),password:c.z.string().min(8)});var h=t(59752),g=t(72816),b=(0,l.V)(()=>{let{mailLogin:e,googleLogin:r}=(0,a.BH)(),{handleSubmit:t,control:l}=(0,g.cI)({mode:"onSubmit",resolver:(0,d.F)(u)}),i=async e=>{e.credential&&r({socialId:e.credential})};return(0,o.jsx)("div",{className:"flex h-screen w-screen items-center justify-center",children:(0,o.jsxs)("div",{className:"bg-foreground  w-[390px] items-center justify-center rounded p-8",children:[(0,o.jsx)("h1",{className:"mb-4 text-center text-3xl text-white",children:"Sign in"}),(0,o.jsx)(n.gN,{icon:h.Mh,variant:"muted",name:"email",control:l,type:"email",placeholder:"Enter your email"}),(0,o.jsx)(n.gN,{icon:h.ro,variant:"muted",control:l,className:"my-3",name:"password",type:"password",placeholder:"Enter your password"}),(0,o.jsxs)("div",{className:"flex h-8 w-full items-center justify-center gap-2",children:[(0,o.jsx)(n.zx,{fullWidth:!0,size:"sm",className:"h-full",variant:"primary",onClick:t(r=>{e(r)}),children:"Login"}),(0,o.jsx)(s.kZ,{useOneTap:!0,size:"medium",shape:"rectangular",theme:"outline",onSuccess:i})]})]})})})},82961:function(e,r,t){"use strict";t.d(r,{zx:function(){return s},rE:function(){return h},gN:function(){return f},ld:function(){return w},II:function(){return m},Kx:function(){return p}});var o=t(27573),n=t(72133),a=t(51530),l=t(92766);let d={colors:{foreground:"bg-foreground border-[1px] border-bordered text-white hover:bg-muted",muted:"bg-muted border-[1px] border-bordered text-white hover:bg-foreground",primary:"bg-primary text-white border-[1px] border-transparent",danger:"bg-danger text-white border-[1px] border-transparent hover:bg-danger",background:"bg-background border-[1px] border-transparent text-white hover:bg-muted",success:"bg-success text-white border-[1px] border-transparent hover:bg-success",warning:"bg-warning text-white border-[1px] border-transparent hover:bg-warning"},size:{sm:"px-2.5 py-1 text-sm",md:"px-4 py-2 text-md",lg:"px-5 py-3 text-lg"},iconSize:{sm:16,md:18,lg:20}};var s=e=>{let{children:r,icon:t,fullWidth:s,size:i="md",variant:c="foreground",disabled:u=!1,isLoading:h=!1,className:g,...b}=e;return(0,o.jsxs)("button",{disabled:u||h,className:(0,n.cn)("flex cursor-pointer items-center justify-center gap-2 rounded px-3 py-1.5 font-bold duration-200 ease-linear",d.size[i],d.colors[c],(u||h)&&"cursor-not-allowed opacity-50",s?"w-full":"",g),...b,children:[r,h?(0,o.jsx)(l.Z,{width:d.iconSize[i],height:d.iconSize[i],color:a.C[c]}):null,!!t&&!h&&(0,o.jsx)(t,{color:a.C[c],width:d.iconSize[i],height:d.iconSize[i]})]})},i=t(59752),c=t(7653);let u={colors:{foreground:"border-foreground  hover:border-bordered",muted:"border-bordered  hover:border-foreground",background:"border-background  hover:border-bordered"},padding:{sm:"p-4",md:"p-8",lg:"p-12"},maxWidth:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"}};var h=e=>{let{onDropFile:r=()=>null,defaultFiles:t=[],multiple:l=!1,disabled:d=!1,className:s="",style:h,accept:g="image/*",variant:b="foreground",onChange:m=()=>null,onFileDelete:f=()=>null,size:x="sm",...p}=e,[w,v]=(0,c.useState)(t),j=(0,c.useRef)(null),y=(0,c.useCallback)(e=>{l||(v(e),r(e)),v([...w,...e]),r(e)},[w,l,r]);return(0,c.useEffect)(()=>{j.current&&0===w.length&&(j.current.value="")},[w]),(0,o.jsxs)("div",{className:(0,n.cn)(u.maxWidth[x],s),style:h,children:[(0,o.jsx)("div",{className:(0,n.cn)("no-scrollbar flex gap-2 overflow-scroll",0===w.length&&"hidden"),children:w.map(e=>e&&(0,o.jsx)("div",{children:(0,o.jsxs)("div",{color:b,className:(0,n.cn)("mb-2 max-w-[200px] items-center justify-center rounded border-[1px] p-2 text-center",u.colors[b]),onClick:()=>{v(w.filter(r=>r.name!==e.name)),f(e,w.indexOf(e))},children:[(0,o.jsx)(i.$B,{color:a.I.white,width:45,height:45,className:"mx-auto mb-2"}),(0,o.jsx)("span",{className:"block overflow-hidden text-ellipsis ",children:e.name})]})},e.name+e.type))}),(0,o.jsx)("div",{className:(0,n.cn)("mt-2 flex cursor-pointer items-center justify-center rounded  border-[1px]  duration-200",u.padding[x],u.colors[b]),children:(0,o.jsx)("input",{multiple:l,type:"file",ref:j,className:"h-full w-full cursor-pointer",disabled:d,accept:g,onChange:e=>{e.target.files&&(y([...e.target.files]),m(e))},...p})})]})},g=t(72816);let b={colors:{foreground:"bg-foreground placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-bordered",muted:"bg-muted placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-gray",background:"bg-background border-[1px] border-bordered placeholder-white text-white hover:border-bordered focus:border-foreground"}};var m=e=>{let{icon:r,isError:t=!1,className:l="",variant:d="foreground",...s}=e;return(0,o.jsxs)("div",{className:"relative flex h-full w-full cursor-text items-center justify-center",children:[(0,o.jsx)("input",{className:(0,n.cn)("placeholder-gray focus:shadow-outline w-full rounded border-0 px-4 py-1.5 text-sm text-white duration-200 ease-linear focus:outline-0",r&&"pl-9",t&&"border-danger border-[1px]",b.colors[d],s.disabled&&"cursor-not-allowed",l),...s}),r?(0,o.jsx)(r,{width:20,height:20,color:a.I.gray,className:"absolute left-2.5"}):null]})},f=e=>{let{variant:r="foreground",className:t,style:n,icon:a,...l}=e;return(0,o.jsx)(g.Qr,{control:l.control,name:l.name,defaultValue:l.defaultValue,render:e=>{let{field:{value:d,onChange:s,onBlur:i},fieldState:{error:c}}=e;return(0,o.jsxs)("div",{className:t,style:n,children:[(0,o.jsx)(m,{variant:r,isError:!!c,value:d,icon:a,onBlur:i,onChange:"number"===l.type?e=>s(Number(+e.target.value)):s,...l}),!!c&&(0,o.jsx)("p",{className:"text-danger mt-0.5 text-xs italic",children:c.message})]})}})};let x={colors:{foreground:"bg-foreground placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-bordered",muted:"bg-muted placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-gray",background:"bg-background border-[1px] border-foreground placeholder-white text-white hover:border-foreground focus:border-foreground"}};var p=e=>{let{variant:r="foreground",className:t="",...a}=e;return(0,o.jsx)("textarea",{value:a.value,className:(0,n.cn)("placeholder-gray h-full w-full resize-none rounded p-2 text-white focus:outline-0",x.colors[r],a.disabled&&"cursor-not-allowed",t),...a})},w=e=>{let{variant:r="foreground",className:t,style:n,...a}=e;return(0,o.jsx)(g.Qr,{control:a.control,name:a.name,defaultValue:a.defaultValue,render:e=>{let{field:{value:l,onChange:d,onBlur:s},fieldState:{error:i}}=e;return(0,o.jsxs)("div",{className:t,style:n,children:[(0,o.jsx)(p,{variant:r,value:l,onBlur:s,onChange:d,...a}),!!i&&(0,o.jsx)("p",{className:"text-danger mt-0.5 text-xs italic",children:i.message})]})}})}},92766:function(e,r,t){"use strict";var o=t(27573);r.Z=e=>{let{width:r=16,height:t=16,color:n="primary"}=e;return(0,o.jsxs)("svg",{className:"animate-spin",fill:"none",viewBox:"0 0 24 24",style:{color:n,width:r,height:t},children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}},70729:function(e,r,t){"use strict";t.d(r,{BH:function(){return l},aC:function(){return s}});let o={...t(30387)};var n=t(47391),a=t(61929);let l=()=>{let e=(0,a.I0)();return(0,n.DE)(o,e)},d=a.v9,s=()=>d(e=>e.auth);t(7653)},69184:function(e,r,t){"use strict";t.d(r,{V:function(){return i},o:function(){return c}});var o=t(27573),n=t(70729),a=t(48196),l=t(31783),d=t(54603),s=t(7653);let i=e=>function(r){let{user:t,isLoading:a}=(0,n.aC)();return(0,s.useLayoutEffect)(()=>{t&&(0,d.redirect)(l.M.dashboard)},[t,a]),(0,o.jsx)(e,{...r})},c=e=>function(r){let{user:t,isLoading:i}=(0,n.aC)(),{logout:c}=(0,n.BH)();return(0,s.useLayoutEffect)(()=>{(async()=>{!(0,a.YV)()&&t&&c()})(),t||i||(0,d.redirect)(l.j.login)},[t,i]),(0,o.jsx)(e,{...r})}},30387:function(e,r,t){"use strict";t.r(r),t.d(r,{googleLogin:function(){return i},logout:function(){return c},mailLogin:function(){return s}});var o=t(28603),n=t(96604),a=t(34293),l=t(1500),d=t(48196);let s=(0,a.hg)("auth/mailLogin",async(e,r)=>{let{email:t,password:a}=e;try{let{data:e}=await o.Z.auth.mailLogin({email:t,password:a});if(console.log(e),"admin"!==e.user.role)return r.rejectWithValue("You are not admin");return(0,d.Jp)({accessToken:e.accessToken,refreshToken:e.refreshToken}),(0,n.Qm)("Login successfully"),e}catch(e){return(0,n.Jc)(e),r.rejectWithValue(e)}}),i=(0,a.hg)("auth/googleLogin",async(e,r)=>{let{socialId:t}=e;try{let{data:e}=await o.Z.auth.googleSign({socialId:t});if(console.log(e),"admin"!==e.user.role)return r.rejectWithValue(l.eI.somethingWrong);return(0,d.Jp)({accessToken:e.accessToken,refreshToken:e.refreshToken}),(0,n.Qm)("Login successfully"),e}catch(e){return(0,n.Jc)(e),r.rejectWithValue(e)}}),c=(0,a.hg)("auth/logout",()=>{try{(0,d.wq)()}catch(e){(0,n.Jc)(e)}return{}})},31783:function(e,r,t){"use strict";t.d(r,{M:function(){return o},j:function(){return n}});let o={bookCatalogRoute:"/admin/book/catalog",bookCreateRoute:"/admin/book/create",bookCreateWithTemplateRoute:e=>"/admin/book/create?template="+e,bookUpdateRoute:e=>"/admin/book/"+e+"/update",bookOverviewRoute:e=>"/admin/book/"+e,parserCatalogRoute:"/admin/parser/catalog",userCatalogRoute:"/admin/user/catalog",dashboard:"/admin/dashboard"},n={login:"/login"}}},function(e){e.O(0,[201,485,628,463,192,834,63,675,747,362,677,744],function(){return e(e.s=92350)}),_N_E=e.O()}]);