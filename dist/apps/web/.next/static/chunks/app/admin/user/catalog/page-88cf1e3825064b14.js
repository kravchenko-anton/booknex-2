(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{11889:function(e,t,a){Promise.resolve().then(a.bind(a,11670))},11670:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(27573),r=a(45682),n=a(82961),l=a(70950),i=a(96604),o=a(90939),d=a(59752);let c=e=>{let{remove:t,removeLoading:a}=e;return[{id:"id",enableHiding:!1,header:()=>(0,s.jsx)("p",{className:"text-center text-lg",children:"id"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("p",{className:"text-center text-2xl",children:t.original.id})}},{id:"picture",header:()=>(0,s.jsx)("p",{className:"text-center text-lg",children:"Picture"}),enableHiding:!1,cell:e=>{let{row:t}=e;return(0,s.jsx)("img",{alt:t.original.email,src:(0,o.q)(t.original.picture||"fallback.png"),width:50,height:50,className:" mx-auto h-[60px] w-[60px] rounded-md"})}},{id:"Bio",enableHiding:!1,header:()=>(0,s.jsx)("p",{className:"text-center text-lg",children:"Info"}),cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:" gap-4",children:[(0,s.jsx)("h2",{className:"text-lg",children:t.original.fullName}),(0,s.jsx)("p",{className:"text-xm",children:t.original.email}),(0,s.jsxs)("p",{className:"text-xm",children:[" ",t.original.socialId]}),(0,s.jsxs)("p",{children:["joined: ",function(e){let t=new Intl.RelativeTimeFormat("en"),a={years:31536e3,months:2592e3,weeks:604800,days:86400,hours:3600,minutes:60,seconds:1},s=(e.getTime()-Date.now())/1e3;for(let e in a){let r=a[e];if(!r||!(r<Math.abs(s)))continue;let n=s/r;return t.format(Math.round(n),e)}return"Just now"}(new Date(t.original.createdAt))]}),(0,s.jsxs)("p",{children:["location: ",(0,s.jsxs)("b",{className:"font-bold",children:[" ",t.original.location]})]})]})}},{id:"Activities",enableHiding:!1,header:()=>(0,s.jsx)("p",{className:"text-center text-lg",children:"Activities"}),cell:e=>{let{row:t}=e;return(0,s.jsx)(r.Z,{onlyGraph:!0,data:t.original.activities})}},{id:"Library",enableHiding:!1,header:()=>(0,s.jsx)("p",{className:"text-center text-lg",children:"Library"}),cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:" max-w-[80px] items-center justify-center  gap-2",children:[(0,s.jsx)(n.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:"".concat(t.original._count.savedBooks," Saved")}),(0,s.jsx)(n.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:"".concat(t.original._count.readingBooks," Read")}),(0,s.jsx)(n.zx,{size:"sm",variant:"muted",className:"m-1 w-full",children:"".concat(t.original._count.finishedBooks," Finish")})]})}},{id:"genres",enableHiding:!1,header:()=>(0,s.jsx)("p",{className:"text-center text-xl",children:"Genres"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:" max-w-[110px] items-center justify-center gap-1",children:t.original.selectedGenres.map(e=>(0,s.jsx)(n.zx,{size:"sm",variant:"muted",className:"mb-2 w-full",children:e.name},e.slug))})}},{id:"Actions",cell:e=>{let{row:r}=e;return(0,s.jsxs)(l.h_,{children:[(0,s.jsx)(l.$F,{className:"focus-visible:outline-0",children:(0,s.jsx)(d.yF,{height:40,width:40,className:"bg-muted border-bordered rounded border-[1px] p-2"})}),(0,s.jsx)(l.AW,{align:"end",children:(0,s.jsx)(l.Xi,{onClick:()=>(0,i.Hz)("Are you sure you want to delete this book?",{action:{label:"Delete",onClick:()=>{if(a)return(0,i.Rr)("Please wait");t(r.original.id)}}}),children:"Delete"})})]})}}]};var u=a(28603),m=a(84983),f=a(63543),x=a(56646);let h=e=>{let{searchTerm:t="",page:a=0}=e,s=(0,m.NL)(),{data:r}=(0,f.a)({queryKey:["users",t,a],queryFn:()=>u.Z.user.catalog(t,+a),select:e=>e.data}),{mutateAsync:n,isLoading:l}=(0,x.D)({mutationKey:["delete-user"],mutationFn:e=>u.Z.user.remove(e),onError(e){console.log("error",e)},async onSuccess(){(0,i.Qm)("User deleted"),await s.invalidateQueries({queryKey:["users"]})}});return{users:r,deleteUser:n,deleteUserLoading:l}};var p=a(68214),g=a(56911),N=a(57575),b=a(76098),j=a(31783),y=a(72763),w=a(12870),v=a(54603),k=()=>{var e;let t=(0,v.useRouter)(),{page:a,searchTerm:r}=(0,N.C)(),{users:n,deleteUser:l,deleteUserLoading:i}=h({page:a,searchTerm:r}),o=(0,y.b7)({data:null!==(e=null==n?void 0:n.data)&&void 0!==e?e:[],columns:c({remove:l,removeLoading:i}),getCoreRowModel:(0,w.sC)()});return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(g.Z,{title:"Users",defaultTerm:r,onSearchSubmit:e=>{t.replace((0,b.H)(j.M.userCatalogRoute,{searchTerm:e.searchTerm}))}}),(0,s.jsx)(p.Z,{currentPage:a,totalPages:Number(null==n?void 0:n.totalPages),canLoadMore:null==n?void 0:n.canLoadMore,table:o})]})}},45682:function(e,t,a){"use strict";var s=a(27573),r=a(88572),n=a(72133),l=a(7653),i=a(75026);let o=["hsl(0, 0%, 20%)","hsl(0, 0%, 30%)","hsl(0, 0%, 40%)","hsl(0, 0%, 60%)","hsl(0, 0%, 80%)","#7DB9B6","#E96479","#E33B54","#D61F3A","#B31930","#A1172C"];t.Z=e=>{var t;let{onlyGraph:a=!1,data:d=[]}=e,[c,u]=(0,l.useState)(null),m=e=>{0!==e.level&&u(e)};return(0,s.jsxs)("div",{className:"sm:min-w-full xl:min-w-[600px]",children:[(0,s.jsx)(i.ZP,{hideColorLegend:a,hideTotalCount:a,hideMonthLabels:a,maxLevel:10,data:d,style:{width:"100%"},theme:{dark:o},eventHandlers:{onClick:()=>m}}),(0,s.jsx)(r.dZ,{isOpen:!!c,onClose:()=>u(null),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Tu,{className:"pb-2",children:(0,s.jsxs)("h1",{className:"text-3xl font-medium",children:["Activities: ",new Date(c.date).toDateString()]})}),(0,s.jsx)("div",{className:"no-scrollbar h-[95%] w-full overflow-y-scroll",children:null===(t=c.activities)||void 0===t?void 0:t.map(e=>(0,s.jsxs)("p",{className:(0,n.cn)("text-success  font-mono text-lg"),children:[(0,s.jsxs)("b",{className:"text-gray",children:["[",e.time,"]"]})," ",(0,s.jsxs)("b",{className:"font-mono",style:{color:o[e.importance]},children:["[",e.importance,"]"]})," ",e.message]},e.time))})]}):(0,s.jsx)("div",{children:"Nothing selected"})})]})}},70950:function(e,t,a){"use strict";a.d(t,{$F:function(){return d},AW:function(){return c},VD:function(){return m},Xi:function(){return u},h_:function(){return o}});var s=a(27573),r=a(72133),n=a(94336),l=a(59752),i=a(7653);let o=n.fC,d=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,(0,i.forwardRef)((e,t)=>{let{className:a,inset:i,children:o,...d}=e;return(0,s.jsxs)(n.fF,{ref:t,className:(0,r.cn)("focus:bg-accent data-[state=open]:bg-foreground flex cursor-default select-none items-center rounded px-2 py-1.5 text-sm outline-none",i&&"pl-8",a),...d,children:[o,(0,s.jsx)(l._Q,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,(0,i.forwardRef)((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.tu,{ref:t,className:(0,r.cn)("bg-foreground text-gray data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border-foreground z-50 min-w-[8rem] overflow-hidden rounded border  p-1 shadow-lg",a),...l})}).displayName=n.tu.displayName;let c=(0,i.forwardRef)((e,t)=>{let{className:a,sideOffset:l=4,...i}=e;return(0,s.jsx)(n.Uv,{children:(0,s.jsx)(n.VY,{ref:t,sideOffset:l,className:(0,r.cn)("bg-foreground  border-bordered z-50 min-w-[8rem] overflow-hidden rounded border p-1 text-white shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});c.displayName=n.VY.displayName;let u=(0,i.forwardRef)((e,t)=>{let{className:a,inset:l,...i}=e;return(0,s.jsx)(n.ck,{ref:t,className:(0,r.cn)("focus:bg-muted  relative flex cursor-default select-none items-center rounded px-2 py-1.5 text-sm outline-none transition-colors focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...i})});u.displayName=n.ck.displayName,(0,i.forwardRef)((e,t)=>{let{className:a,children:i,checked:o,...d}=e;return(0,s.jsxs)(n.oC,{ref:t,checked:o,className:(0,r.cn)("focus:bg-foreground relative flex cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(l.Jr,{className:"h-4 w-4"})})}),i]})}).displayName=n.oC.displayName,(0,i.forwardRef)((e,t)=>{let{className:a,children:i,...o}=e;return(0,s.jsxs)(n.Rk,{ref:t,className:(0,r.cn)("focus:bg-foreground focus:text-gray relative flex cursor-default select-none items-center rounded py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(l.oT,{className:"h-4 w-4 fill-current"})})}),i]})}).displayName=n.Rk.displayName,(0,i.forwardRef)((e,t)=>{let{className:a,inset:l,...i}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,r.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...i})}).displayName=n.__.displayName;let m=(0,i.forwardRef)((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,r.cn)("bg-muted  -mx-1 my-1 h-px",a),...l})});m.displayName=n.Z0.displayName},88572:function(e,t,a){"use strict";a.d(t,{Tu:function(){return x},dZ:function(){return h}});var s=a(27573),r=a(72133),n=a(7472),l=a(7521),i=a(59752),o=a(7653);let d=n.fC,c=n.h_,u=(0,o.forwardRef)((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.aV,{className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 ",a),...l,ref:t})});u.displayName=n.aV.displayName;let m=(0,l.j)("fixed z-50 gap-4 bg-foreground p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b  border-foreground data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-foreground data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-foreground border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l border-foreground data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right md:max-w-lg sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=(0,o.forwardRef)((e,t)=>{let{side:a="right",className:l,children:o,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.VY,{ref:t,className:(0,r.cn)(m({side:a}),l),...d,children:[o,(0,s.jsxs)(n.x8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-primary absolute right-4 top-4 rounded opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,s.jsx)(i.x8,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};x.displayName="SheetHeader",(0,o.forwardRef)((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,r.cn)("text-foreground text-lg font-semibold",a),...l})}).displayName=n.Dx.displayName,(0,o.forwardRef)((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,r.cn)("text-muted-foreground text-sm",a),...l})}).displayName=n.dk.displayName;let h=e=>{let{children:t,isOpen:a=!1,onClose:r=()=>null}=e;return(0,s.jsx)(d,{open:a,onOpenChange:r,children:(0,s.jsx)(c,{children:(0,s.jsx)(f,{children:t})})})}}},function(e){e.O(0,[201,485,628,878,382,347,823,997,763,336,816,63,675,781,747,362,677,744],function(){return e(e.s=11889)}),_N_E=e.O()}]);