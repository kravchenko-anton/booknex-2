{"version":3,"file":"static/chunks/598-6094dfb37c9156dc.js","mappings":"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","sources":["webpack://_N_E/./app/admin/book/_components/ebook-editor/trim-content-menu.tsx","webpack://_N_E/./app/admin/book/_components/ebook-editor/chapterNames.ts","webpack://_N_E/./app/admin/book/_components/ebook-editor/useBookCompose.ts","webpack://_N_E/./components/ui/error-message/error-message.tsx","webpack://_N_E/./app/admin/book/_components/ebook-editor/editor.tsx","webpack://_N_E/./components/ui/dialog.tsx","webpack://_N_E/./components/ui/command.tsx","webpack://_N_E/./app/admin/book/_components/select-genres.tsx","webpack://_N_E/./hooks/useFileUpload.ts","webpack://_N_E/./app/admin/book/_components/select-picture.tsx","webpack://_N_E/./components/ui/button/settings.ts","webpack://_N_E/./components/ui/button/button.tsx","webpack://_N_E/./components/ui/dropzone/settings.ts","webpack://_N_E/./components/ui/dropzone/dropzone.tsx","webpack://_N_E/./components/ui/dropzone/form-dropzone.tsx","webpack://_N_E/./components/ui/field/settings.ts","webpack://_N_E/./components/ui/field/input.tsx","webpack://_N_E/./components/ui/field/field.tsx","webpack://_N_E/./components/ui/layout/layout.tsx","webpack://_N_E/./components/ui/text-editor/settings.ts","webpack://_N_E/./components/ui/text-editor/text-area.tsx","webpack://_N_E/./components/ui/text-editor/form-text-editor.tsx","webpack://_N_E/./components/ui/index.ts","webpack://_N_E/./components/ui/loader/loader.tsx","webpack://_N_E/./components/ui/popover.tsx","webpack://_N_E/./utils/validate-parameter.ts","webpack://_N_E/../../libs/global/validation/book/ebook.payload.dto.ts","webpack://_N_E/<anon>"],"sourcesContent":["import { Button, Field } from '@/components/ui'\n\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger\n} from '@/components/ui/popover'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { Scissors } from 'icons'\nimport { FC } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { z } from 'zod'\n\ninterface TrimContentButtonProperties {\n\tonSubmit: (data: parseValidationType) => void\n}\n\nconst trimValidation = z.object({\n\tstartLine: z.number().int(),\n\tendLine: z.number().int()\n})\n\ntype parseValidationType = z.infer<typeof trimValidation>\n\nexport const TrimContentMenu: FC<TrimContentButtonProperties> = ({\n\tonSubmit\n}) => {\n\tconst { control, handleSubmit } = useForm<parseValidationType>({\n\t\tresolver: zodResolver(trimValidation)\n\t})\n\n\treturn (\n\t\t<Popover>\n\t\t\t<PopoverTrigger>\n\t\t\t\t<Scissors\n\t\t\t\t\twidth={33}\n\t\t\t\t\theight={33}\n\t\t\t\t\tclassName='bg-muted border-bordered h-full w-[35px] cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t/>\n\t\t\t</PopoverTrigger>\n\n\t\t\t<PopoverContent className='p-4'>\n\t\t\t\t<div className='space-y-2'>\n\t\t\t\t\t<h4 className='font-medium leading-none'>Trim text</h4>\n\t\t\t\t\t<p className='text-muted-foreground pb-2 text-sm'>\n\t\t\t\t\t\tTrim text from start to end line\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\n\t\t\t\t<Field\n\t\t\t\t\tvariant='muted'\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\ttype='number'\n\t\t\t\t\tname={'startLine'}\n\t\t\t\t\tplaceholder={'Start line'}\n\t\t\t\t/>\n\n\t\t\t\t<Field\n\t\t\t\t\tvariant='muted'\n\t\t\t\t\tcontrol={control}\n\t\t\t\t\tclassName='my-2'\n\t\t\t\t\tname={'endLine'}\n\t\t\t\t\ttype='number'\n\t\t\t\t\tplaceholder={'end line'}\n\t\t\t\t/>\n\t\t\t\t<Button variant='primary' size={'sm'} onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\tTrim content\n\t\t\t\t</Button>\n\t\t\t</PopoverContent>\n\t\t</Popover>\n\t)\n}\n","export const chapterNames = [\n\t'One',\n\t'Two',\n\t'Three',\n\t'Four',\n\t'Five',\n\t'Six',\n\t'Seven',\n\t'Eight',\n\t'Nine',\n\t'Ten',\n\t'Eleven',\n\t'Twelve',\n\t'Thirteen',\n\t'Fourteen',\n\t'Fifteen',\n\t'Sixteen',\n\t'Seventeen',\n\t'Eighteen',\n\t'Nineteen',\n\t'Twenty',\n\t'Twenty-one',\n\t'Twenty-two',\n\t'Twenty-three',\n\t'Twenty-four',\n\t'Twenty-five',\n\t'Twenty-six',\n\t'Twenty-seven',\n\t'Twenty-eight',\n\t'Twenty-nine',\n\t'Thirty',\n\t'Thirty-one',\n\t'Thirty-two',\n\t'Thirty-three',\n\t'Thirty-four',\n\t'Thirty-five',\n\t'Thirty-six',\n\t'Thirty-seven',\n\t'Thirty-eight',\n\t'Thirty-nine',\n\t'Forty',\n\t'Forty-one',\n\t'Forty-two',\n\t'Forty-three',\n\t'Forty-four',\n\t'Forty-five',\n\t'Forty-six',\n\t'Forty-seven',\n\t'Forty-eight',\n\t'Forty-nine',\n\t'Fifty',\n\t'Fifty-one',\n\t'Fifty-two',\n\t'Fifty-three',\n\t'Fifty-four',\n\t'Fifty-five',\n\t'Fifty-six',\n\t'Fifty-seven',\n\t'Fifty-eight',\n\t'Fifty-nine',\n\t'Sixty',\n\t'Sixty-one',\n\t'Sixty-two',\n\t'Sixty-three',\n\t'Sixty-four',\n\t'Sixty-five',\n\t'Sixty-six',\n\t'Sixty-seven',\n\t'Sixty-eight',\n\t'Sixty-nine',\n\t'Seventy',\n\t'Seventy-one',\n\t'Seventy-two',\n\t'Seventy-three',\n\t'Seventy-four',\n\t'Seventy-five',\n\t'Seventy-six',\n\t'Seventy-seven',\n\t'Seventy-eight',\n\t'Seventy-nine',\n\t'Eighty',\n\t'Eighty-one',\n\t'Eighty-two',\n\t'Eighty-three',\n\t'Eighty-four',\n\t'Eighty-five',\n\t'Eighty-six',\n\t'Eighty-seven',\n\t'Eighty-eight',\n\t'Eighty-nine',\n\t'Ninety',\n\t'Ninety-one',\n\t'Ninety-two',\n\t'Ninety-three',\n\t'Ninety-four',\n\n\t'Ninety-five',\n\t'Ninety-six',\n\t'Ninety-seven',\n\t'Ninety-eight',\n\t'Ninety-nine',\n\t'One hundred',\n\t'One hundred and one',\n\t'One hundred and two',\n\t'One hundred and three',\n\t'One hundred and four',\n\t'One hundred and five',\n\t'One hundred and six'\n]\n","import { chapterNames } from '@/app/admin/book/_components/ebook-editor/chapterNames'\nimport api from '@/services/api'\nimport { errorToast, successToast } from '@/utils/toast'\nimport { useMutation } from '@tanstack/react-query'\nimport { EBookPayloadType } from 'global/validation/book/ebook.payload.dto'\n\nexport const useBookCompose = ({\n\tebooks: ebooks,\n\tsetEBooks: setEBooks\n}: {\n\tebooks: EBookPayloadType[] | undefined\n\tsetEBooks: (books: EBookPayloadType[]) => void\n}) => {\n\tconst { mutateAsync: unfold, isLoading: unfoldLoading } = useMutation({\n\t\tmutationKey: ['unfold'],\n\n\t\tmutationFn: (file: File) => api.parser.unfold(file),\n\t\tonSuccess: () => successToast('File uploaded'),\n\t\tonError: () => errorToast('Error while uploading book')\n\t})\n\n\tconst deleteBook = ({ bookId }: { bookId: number }) => {\n\t\tif (!ebooks) return errorToast('Error deleting book')\n\t\tsetEBooks(ebooks?.filter(book => book.id !== bookId))\n\t\tsuccessToast('Book deleted')\n\t}\n\n\tconst trimmingEBookContent = ({\n\t\tbookId,\n\t\tstartLine,\n\t\tendLine\n\t}: {\n\t\tbookId: number\n\t\tstartLine: number\n\t\tendLine: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error trimming book')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map(({ id, name, text }) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\ttext: text\n\t\t\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(_, index) => index < startLine - 1 || index > endLine - 1\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t\tsuccessToast('Book trimmed')\n\t}\n\n\tconst generateChapterNames = ({ bookId }: { bookId: number }) => {\n\t\tif (!ebooks) return errorToast('Error generating chapter names')\n\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map((content, index) => ({\n\t\t\t\t\t\t\t...content,\n\n\t\t\t\t\t\t\tname: `Chapter ${chapterNames[index]}`\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\tconst addNewCharacterAfterContent = ({\n\t\tbookId,\n\t\tchapterId\n\t}: {\n\t\tbookId: number\n\t\tchapterId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error adding new chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\tconst index = book.chapters.findIndex(\n\t\t\t\t\t\tcontent => content.id === chapterId\n\t\t\t\t\t)\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: [\n\t\t\t\t\t\t\t...book.chapters.slice(0, index + 1),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: Math.round(Math.random() * 1_000_000),\n\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...book.chapters.slice(index + 1)\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\tconst moveChaptersToNewBook = ({\n\t\tbookId,\n\t\tchapterId\n\t}: {\n\t\tbookId: number\n\t\tchapterId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error moving chapters')\n\t\tconst book = ebooks.find(book => book.id === bookId)\n\t\tif (!book) return ebooks\n\t\tconst index = book.chapters.findIndex(content => content.id === chapterId)\n\t\tif (index <= 1) return errorToast('Error moving chapters')\n\t\tconst chapters = book.chapters.slice(index)\n\t\tconst oldBookChapters = book.chapters.filter(\n\t\t\tcontent => !chapters.some(chapter => chapter.id === content.id)\n\t\t)\n\t\tconst newBook = {\n\t\t\tid: ebooks.length + 1,\n\t\t\ttitle: `${ebooks.length + 1} book`,\n\t\t\tchapters\n\t\t}\n\t\treturn setEBooks([\n\t\t\t...ebooks.map(book =>\n\t\t\t\tbook.id === bookId ? { ...book, chapters: oldBookChapters } : book\n\t\t\t),\n\t\t\tnewBook\n\t\t])\n\t}\n\n\tconst mergeContentWithTopCharacter = ({\n\t\tbookId,\n\t\ttopChapterId,\n\t\tinsertedContent\n\t}: {\n\t\tbookId: number\n\t\ttopChapterId: number\n\t\tinsertedContent: string\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error merging content')\n\t\treturn setEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\tconst element = book.chapters.find(\n\t\t\t\t\t\tcontent => content.id === topChapterId\n\t\t\t\t\t)\n\t\t\t\t\tconst index = book.chapters.findIndex(\n\t\t\t\t\t\tcontent => content.id === topChapterId\n\t\t\t\t\t)\n\t\t\t\t\tif (!element) {\n\t\t\t\t\t\terrorToast('Error merging content')\n\t\t\t\t\t\treturn book\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: [\n\t\t\t\t\t\t\t...book.chapters.slice(0, index),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: element.id,\n\t\t\t\t\t\t\t\tname: element.name,\n\t\t\t\t\t\t\t\ttext: `${element.text}\\n${insertedContent}`\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...book.chapters.slice(index + 1)\n\t\t\t\t\t\t].filter(content => content.text !== insertedContent)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst updateBookTitle = ({\n\t\tvalue,\n\t\tbookId\n\t}: {\n\t\tvalue: string\n\t\tbookId: number\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error updating book title')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\ttitle: value\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst removeChapter = (bookId: number, removedId: number) => {\n\t\tif (!ebooks) return errorToast('Error removing chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.filter(content => content.id !== removedId)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t\tsuccessToast('Chapter removed')\n\t}\n\n\tconst updateChapter = ({\n\t\tchapterId,\n\t\tbookId,\n\t\tvalue\n\t}: {\n\t\tchapterId: number\n\t\tbookId: number\n\t\tvalue: {\n\t\t\tname?: string\n\t\t\ttext?: string\n\t\t}\n\t}) => {\n\t\tif (!ebooks) return errorToast('Error updating chapter')\n\t\tsetEBooks(\n\t\t\tebooks.map(book => {\n\t\t\t\tif (book.id === bookId) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...book,\n\t\t\t\t\t\tchapters: book.chapters.map(chapter => {\n\t\t\t\t\t\t\tif (chapter.id === chapterId) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t...chapter,\n\t\t\t\t\t\t\t\t\t...value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn chapter\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn book\n\t\t\t})\n\t\t)\n\t}\n\n\tconst upload = ({\n\t\ttitle,\n\t\tchapters\n\t}: {\n\t\ttitle: string\n\t\tchapters: {\n\t\t\tid: number\n\t\t\tname: string\n\t\t\ttext: string\n\t\t}[]\n\t}) => {\n\t\tconst elementIndex = ebooks?.length || 0\n\n\t\tsetEBooks([\n\t\t\t...(ebooks || []),\n\t\t\t{\n\t\t\t\tid: elementIndex + 1,\n\t\t\t\ttitle: title || '',\n\t\t\t\tchapters: chapters || []\n\t\t\t}\n\t\t])\n\t\tsuccessToast('Book uploaded')\n\t}\n\n\tconst unfoldWithUpload = (files: File[]) => {\n\t\tfor (const file of files) {\n\t\t\tunfold(new File([file], file.name)).then(({ data: chapters }) => {\n\t\t\t\tupload({\n\t\t\t\t\ttitle: file.name,\n\t\t\t\t\tchapters\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\n\treturn {\n\t\tbooks: {\n\t\t\tupload: unfoldWithUpload,\n\t\t\tstate: ebooks || [],\n\t\t\tunfoldLoading,\n\t\t\ttrimmingEBookContent,\n\t\t\tgenerateChapterNames,\n\t\t\taddNewCharacterAfterContent,\n\t\t\tdelete: deleteBook,\n\t\t\tupdateToc: updateChapter,\n\t\t\tupdateBookTitle,\n\t\t\tmergeContentWithTopCharacter,\n\t\t\tremoveToc: removeChapter,\n\t\t\tmoveChaptersToNewBook\n\t\t}\n\t}\n}\n","import { FC, memo } from 'react'\n\nconst ErrorMessage: FC<{ message: any }> = ({ message }) => {\n\tif (typeof message === 'string') {\n\t\treturn <p className='text-danger mt-0.5 text-xs italic'>{message}</p>\n\t}\n\tif (message?.message) {\n\t\treturn (\n\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{message.message}</p>\n\t\t)\n\t}\n\n\treturn null\n}\n\nexport default memo(ErrorMessage)\n","import { TrimContentMenu } from '@/app/admin/book/_components/ebook-editor/trim-content-menu'\nimport { useBookCompose } from '@/app/admin/book/_components/ebook-editor/useBookCompose'\nimport { DropZone, Input, TextArea } from '@/components/ui'\nimport ErrorMessage from '@/components/ui/error-message/error-message'\nimport { errorToast } from '@/utils/toast'\nimport { BaseFieldProperties } from 'global/types'\nimport { CaseSensitive, ChevronDown, ChevronUp, Close, Combine } from 'icons'\nimport { Controller } from 'react-hook-form'\n\nconst EbookComposer = <T extends Record<string, any>>({\n\tcontrol,\n\tname\n}: BaseFieldProperties<T>) => (\n\t<Controller\n\t\tcontrol={control}\n\t\tname={name}\n\t\trender={({ field: { value = [], onChange }, fieldState: { error } }) => {\n\t\t\tconst { books } = useBookCompose({\n\t\t\t\tebooks: value,\n\t\t\t\tsetEBooks: onChange\n\t\t\t})\n\t\t\tconsole.log('errors', error)\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<div className='md:w-max md:overflow-y-scroll '>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className='mb-4'>\n\t\t\t\t\t\t\t\t<h1 className='mt-2  text-xl'>Book file</h1>\n\t\t\t\t\t\t\t\t<DropZone\n\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\tsize='sm'\n\t\t\t\t\t\t\t\t\taccept='.epub'\n\t\t\t\t\t\t\t\t\tdisabled={books.unfoldLoading}\n\t\t\t\t\t\t\t\t\tonDropFile={files => {\n\t\t\t\t\t\t\t\t\t\tbooks.upload(files)\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonFileDelete={(_file, index) => {\n\t\t\t\t\t\t\t\t\t\tbooks.delete({\n\t\t\t\t\t\t\t\t\t\t\tbookId: Number(books.state[index]?.id)\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='md:flex md:w-fit'>\n\t\t\t\t\t\t\t\t{books.state.map((book, bookIndex) => {\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tconst bookError = error?.[bookIndex]\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={book.title}\n\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered mb-4 w-full rounded border-[1px] p-2 pt-4 md:mr-1 md:w-[600px]'>\n\t\t\t\t\t\t\t\t\t\t\t<div className='mb-2 flex h-9 items-center  justify-between gap-1'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='muted'\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='mr-2 h-full w-full flex-1'\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={book.title}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={event =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateBookTitle({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage message={bookError?.title?.message} />\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex items-center gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TrimContentMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={data => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.trimmingEBookContent({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstartLine: data.startLine,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tendLine: data.endLine\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CaseSensitive\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={33}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={33}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-muted border-bordered h-full w-[35px] cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.generateChapterNames({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('generate chapters names')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{book.chapters.map((chapter, chapterIndex) => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst chapterError = bookError?.chapters?.[chapterIndex]\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={chapter.id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-muted mb-2 rounded p-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='mb-2 flex w-full items-center justify-between gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='foreground'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={chapter.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateToc({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={chapterError?.name?.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex gap-2'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronUp\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!book.chapters[chapterIndex - 1]?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn errorToast(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Cannot move chapter up'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.mergeContentWithTopCharacter({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinsertedContent: chapter.text,\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttopChapterId: Number(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbook.chapters[chapterIndex - 1]?.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ChevronDown\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.addNewCharacterAfterContent({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('add new character')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Combine\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('combine')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.moveChaptersToNewBook({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Close\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight={34}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='bg-foreground border-bordered cursor-pointer rounded border-[1px] p-1.5'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.removeToc(book.id, chapter.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('remove toc')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={chapter.text}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant='foreground'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=' min-h-[250px] w-full rounded px-4 py-2 font-mono text-sm duration-200 ease-linear'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbooks.updateToc({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchapterId: chapter.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: event.target.value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbookId: book.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage={chapterError?.text?.message}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)\n\t\t}}\n\t/>\n)\n\nexport default EbookComposer\n","'use client'\n\nimport { cn } from '@/utils'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { Close } from 'icons'\nimport type {\n\tComponentPropsWithoutRef,\n\tElementRef,\n\tHTMLAttributes\n} from 'react'\nimport { forwardRef } from 'react'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogOverlay = forwardRef<\n\tElementRef<typeof DialogPrimitive.Overlay>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Overlay\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = forwardRef<\n\tElementRef<typeof DialogPrimitive.Content>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...properties }, reference) => (\n\t<DialogPortal>\n\t\t<DialogOverlay />\n\t\t<DialogPrimitive.Content\n\t\t\tref={reference}\n\t\t\tclassName={cn(\n\t\t\t\t'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...properties}>\n\t\t\t{children}\n\t\t\t<DialogPrimitive.Close className='ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none'>\n\t\t\t\t<Close className='h-4 w-4' />\n\t\t\t\t<span className='sr-only'>Close</span>\n\t\t\t</DialogPrimitive.Close>\n\t\t</DialogPrimitive.Content>\n\t</DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLDivElement>) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t'flex flex-col space-y-1.5 text-center sm:text-left',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLDivElement>) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = forwardRef<\n\tElementRef<typeof DialogPrimitive.Title>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Title\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'text-lg font-semibold leading-none tracking-tight',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = forwardRef<\n\tElementRef<typeof DialogPrimitive.Description>,\n\tComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...properties }, reference) => (\n\t<DialogPrimitive.Description\n\t\tref={reference}\n\t\tclassName={cn('text-muted-foreground text-sm', className)}\n\t\t{...properties}\n\t/>\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogOverlay,\n\tDialogPortal,\n\tDialogTitle\n}\n","'use client'\n\nimport { Dialog, DialogContent } from '@/components/ui/dialog'\nimport { cn } from '@/utils'\n\nimport type { DialogProps } from '@radix-ui/react-dialog'\nimport { Command as CommandPrimitive } from 'cmdk'\nimport { Search } from 'icons'\nimport type {\n\tComponentPropsWithoutRef,\n\tElementRef,\n\tHTMLAttributes\n} from 'react'\nimport { forwardRef } from 'react'\n\nconst Command = forwardRef<\n\tElementRef<typeof CommandPrimitive>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'bg-foreground text-gray flex h-full w-full flex-col overflow-hidden rounded',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommand.displayName = CommandPrimitive.displayName\n\ntype CommandDialogProperties = DialogProps\n\nconst CommandDialog = ({\n\tchildren,\n\t...properties\n}: CommandDialogProperties) => (\n\t<Dialog {...properties}>\n\t\t<DialogContent className='overflow-hidden p-0'>\n\t\t\t<Command className='[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-white [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5'>\n\t\t\t\t{children}\n\t\t\t</Command>\n\t\t</DialogContent>\n\t</Dialog>\n)\n\nconst CommandInput = forwardRef<\n\tElementRef<typeof CommandPrimitive.Input>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...properties }, reference) => (\n\t<div className='border-bordered flex items-center border-b px-3'>\n\t\t<Search className='mr-2 h-4 w-4 shrink-0 opacity-50' />\n\t\t<CommandPrimitive.Input\n\t\t\tref={reference}\n\t\t\tclassName={cn(\n\t\t\t\t'flex h-10 w-full rounded bg-transparent py-3 text-sm outline-none placeholder:text-white disabled:cursor-not-allowed disabled:opacity-50',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...properties}\n\t\t/>\n\t</div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = forwardRef<\n\tElementRef<typeof CommandPrimitive.List>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.List\n\t\tref={reference}\n\t\tclassName={cn('max-h-[300px] overflow-y-auto overflow-x-hidden', className)}\n\t\t{...properties}\n\t/>\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = forwardRef<\n\tElementRef<typeof CommandPrimitive.Empty>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((properties, reference) => (\n\t<CommandPrimitive.Empty\n\t\tref={reference}\n\t\tclassName='py-6 text-center text-sm'\n\t\t{...properties}\n\t/>\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = forwardRef<\n\tElementRef<typeof CommandPrimitive.Group>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Group\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'text-gray overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-white',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = forwardRef<\n\tElementRef<typeof CommandPrimitive.Separator>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Separator\n\t\tref={reference}\n\t\tclassName={cn('bg-bordered -mx-1 h-px', className)}\n\t\t{...properties}\n\t/>\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = forwardRef<\n\tElementRef<typeof CommandPrimitive.Item>,\n\tComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...properties }, reference) => (\n\t<CommandPrimitive.Item\n\t\tref={reference}\n\t\tclassName={cn(\n\t\t\t'aria-selected:bg-muted aria-selected:text-gray relative flex cursor-default select-none items-center rounded px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n\tclassName,\n\t...properties\n}: HTMLAttributes<HTMLSpanElement>) => (\n\t<span\n\t\tclassName={cn('text-gray ml-auto text-xs tracking-widest', className)}\n\t\t{...properties}\n\t/>\n)\nCommandShortcut.displayName = 'CommandShortcut'\n\nexport {\n\tCommand,\n\tCommandDialog,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem,\n\tCommandList,\n\tCommandSeparator,\n\tCommandShortcut\n}\n","import {\n\tCommand,\n\tCommandEmpty,\n\tCommandGroup,\n\tCommandInput,\n\tCommandItem\n} from '@/components/ui/command'\nimport {\n\tPopover,\n\tPopoverContent,\n\tPopoverTrigger\n} from '@/components/ui/popover'\nimport api from '@/services/api'\nimport { cn } from '@/utils'\nimport { useQuery } from '@tanstack/react-query'\nimport { ShortGenre } from 'global/api-client'\nimport { Color } from 'global/colors'\nimport { BaseFieldProperties } from 'global/types'\nimport { Check } from 'icons'\n\nimport { Controller } from 'react-hook-form'\n\nconst SelectGenres = <T extends Record<string, any>>({\n\tcontrol,\n\tname,\n\t...properties\n}: BaseFieldProperties<T>) => {\n\tconst { data: genres = [] } = useQuery({\n\t\tqueryKey: ['genres'],\n\t\tqueryFn: () => api.genre.catalog(),\n\t\tselect: data => data.data\n\t})\n\tconsole.log('genres', genres)\n\treturn (\n\t\t<Controller\n\t\t\tcontrol={control}\n\t\t\tname={name}\n\t\t\trender={({\n\t\t\t\tfield: { value = [] as ShortGenre[], onChange: setGenre },\n\t\t\t\tfieldState: { error }\n\t\t\t}) => {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Popover>\n\t\t\t\t\t\t\t\t<PopoverTrigger className='w-full'>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t'border-bordered bg-foreground  rounded border-[1px] px-2 py-1'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{...properties}>\n\t\t\t\t\t\t\t\t\t\t<div className='flex max-w-xl flex-nowrap gap-2 overflow-hidden'>\n\t\t\t\t\t\t\t\t\t\t\t{value.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(({ slug }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span key={slug}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenres.find(genre => genre.slug === slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 2)\n\t\t\t\t\t\t\t\t\t\t\t\t: 'No genre selected'}{' '}\n\t\t\t\t\t\t\t\t\t\t\t{value.length - 2 > 0 && `(${value.length - 2})`}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</PopoverTrigger>\n\n\t\t\t\t\t\t\t\t<PopoverContent className=' p-0'>\n\t\t\t\t\t\t\t\t\t<Command>\n\t\t\t\t\t\t\t\t\t\t<CommandInput placeholder='Search genre...' />\n\t\t\t\t\t\t\t\t\t\t<CommandEmpty>No genre found.</CommandEmpty>\n\t\t\t\t\t\t\t\t\t\t<CommandGroup>\n\t\t\t\t\t\t\t\t\t\t\t{genres.map(genre => (\n\t\t\t\t\t\t\t\t\t\t\t\t<CommandItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={genre.slug}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={genre.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonSelect={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetGenre(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.find(({ slug }) => slug === genre.slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? value.filter(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({ slug }) => slug !== genre.slug\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: [...value, genre]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Check\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor={Color.white}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'mr-2 h-4 w-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBoolean(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.find(({ slug }) => slug === genre.slug)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'opacity-100'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{genre.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</CommandItem>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</CommandGroup>\n\t\t\t\t\t\t\t\t\t</Command>\n\t\t\t\t\t\t\t\t</PopoverContent>\n\t\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!!error && (\n\t\t\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>\n\t\t\t\t\t\t\t\t{error.message}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)\n\t\t\t}}\n\t\t/>\n\t)\n}\n\nexport default SelectGenres\n","import api from '@/services/api'\nimport { errorToast } from '@/utils/toast'\nimport { useMutation } from '@tanstack/react-query'\nimport { StorageFolderType } from 'global/helpers/storage-types'\n\ninterface UploadFileProperties {\n\tfolder: StorageFolderType\n\tfile: File\n}\n\nexport const useUploadFile = () => {\n\tconst { mutateAsync: upload, isLoading: uploadLoading } = useMutation({\n\t\tmutationKey: ['upload-file'],\n\t\tmutationFn: ({ folder, file }: UploadFileProperties) =>\n\t\t\tapi.storage.upload(folder, file),\n\t\tonError: () =>\n\t\t\terrorToast({\n\t\t\t\ttext1: 'Upload file',\n\t\t\t\ttext2: 'An error occurred',\n\t\t\t\ttype: 'error'\n\t\t\t})\n\t})\n\n\treturn {\n\t\tupload,\n\t\tuploadLoading\n\t}\n}\n","import { useUploadFile } from '@/hooks/useFileUpload'\nimport { getFileUrl } from 'global/api-config'\nimport { BaseFieldProperties } from 'global/types'\nimport { Controller } from 'react-hook-form'\n\nexport const SelectPicture = <T extends Record<string, any>>({\n\tcontrol,\n\tname\n}: BaseFieldProperties<T>) => {\n\tconst { upload, uploadLoading } = useUploadFile()\n\treturn (\n\t\t<Controller\n\t\t\tcontrol={control}\n\t\t\tname={name}\n\t\t\trender={({\n\t\t\t\tfield: { value = '', onChange: setPicture },\n\t\t\t\tfieldState: { error }\n\t\t\t}) => (\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='file'\n\t\t\t\t\t\t\t\tclassName='hidden'\n\t\t\t\t\t\t\t\tdisabled={uploadLoading}\n\t\t\t\t\t\t\t\tonChange={async ({ target }) => {\n\t\t\t\t\t\t\t\t\tconst file = target.files?.[0]\n\n\t\t\t\t\t\t\t\t\tif (!file) return\n\t\t\t\t\t\t\t\t\tupload({\n\t\t\t\t\t\t\t\t\t\tfile,\n\t\t\t\t\t\t\t\t\t\tfolder: 'booksCovers'\n\t\t\t\t\t\t\t\t\t}).then(response => {\n\t\t\t\t\t\t\t\t\t\tsetPicture(response.data.name)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\twidth={220}\n\t\t\t\t\t\t\t\tclassName='border-bordered  cursor-pointer rounded border-[1px]'\n\t\t\t\t\t\t\t\theight={300}\n\t\t\t\t\t\t\t\tsrc={getFileUrl(value)}\n\t\t\t\t\t\t\t\talt='Cover'\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconst element: HTMLElement | null =\n\t\t\t\t\t\t\t\t\t\tdocument.querySelector('input[type=file]')\n\t\t\t\t\t\t\t\t\telement?.click()\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!!error && (\n\t\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{error.message}</p>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t/>\n\t)\n}\n","import type { ButtonProperties } from './types'\n\nexport const settings: {\n\tcolors: Record<Required<ButtonProperties>['variant'], string>\n\tsize: Record<ButtonProperties['size'], string>\n\ticonSize: Record<ButtonProperties['size'], number>\n} = {\n\tcolors: {\n\t\tforeground:\n\t\t\t'bg-foreground border-[1px] border-bordered text-white hover:bg-muted',\n\t\tmuted:\n\t\t\t'bg-muted border-[1px] border-bordered text-white hover:bg-foreground',\n\t\tprimary: 'bg-primary text-white border-[1px] border-transparent',\n\t\tdanger:\n\t\t\t'bg-danger text-white border-[1px] border-transparent hover:bg-danger',\n\t\tbackground:\n\t\t\t'bg-background border-[1px] border-transparent text-white hover:bg-muted',\n\t\tsuccess:\n\t\t\t'bg-success text-white border-[1px] border-transparent hover:bg-success',\n\t\twarning:\n\t\t\t'bg-warning text-white border-[1px] border-transparent hover:bg-warning'\n\t},\n\tsize: {\n\t\tsm: 'px-2.5 py-1 text-sm',\n\t\tmd: 'px-4 py-2 text-md',\n\t\tlg: 'px-5 py-3 text-lg'\n\t},\n\ticonSize: {\n\t\tsm: 16,\n\t\tmd: 18,\n\t\tlg: 20\n\t}\n}\n","import { cn } from '@/utils'\nimport { InnerColor } from 'global/colors'\nimport type { FC } from 'react'\nimport Loader from '../loader/loader'\nimport { settings } from './settings'\nimport type { ButtonProperties } from './types'\n\nconst Button: FC<ButtonProperties> = ({\n\tchildren,\n\ticon: Icon,\n\tfullWidth,\n\tsize = 'md',\n\tvariant = 'foreground',\n\tdisabled = false,\n\tisLoading = false,\n\tclassName,\n\t...properties\n}) => (\n\t<button\n\t\tdisabled={disabled || isLoading}\n\t\tclassName={cn(\n\t\t\t'flex cursor-pointer items-center justify-center gap-2 rounded px-3 py-1.5 font-bold duration-200 ease-linear',\n\t\t\tsettings.size[size],\n\t\t\tsettings.colors[variant],\n\t\t\t(disabled || isLoading) && 'cursor-not-allowed opacity-50',\n\t\t\tfullWidth ? 'w-full' : '',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}>\n\t\t{children}\n\n\t\t{isLoading ? (\n\t\t\t<Loader\n\t\t\t\twidth={settings.iconSize[size]}\n\t\t\t\theight={settings.iconSize[size]}\n\t\t\t\tcolor={InnerColor[variant]}\n\t\t\t/>\n\t\t) : null}\n\t\t{!!Icon && !isLoading && (\n\t\t\t<Icon\n\t\t\t\tcolor={InnerColor[variant]}\n\t\t\t\twidth={settings.iconSize[size]}\n\t\t\t\theight={settings.iconSize[size]}\n\t\t\t/>\n\t\t)}\n\t</button>\n)\n\nexport default Button\n","import type { DropzoneProperties } from './types'\n\nexport const settings: {\n\tcolors: Record<Required<DropzoneProperties>['variant'], string>\n\tpadding: Record<DropzoneProperties['size'], string>\n\tmaxWidth: Record<DropzoneProperties['size'], string>\n} = {\n\tcolors: {\n\t\tforeground: 'border-foreground  hover:border-bordered',\n\t\tmuted: 'border-bordered  hover:border-foreground',\n\t\tbackground: 'border-background  hover:border-bordered'\n\t},\n\tpadding: {\n\t\tsm: 'p-4',\n\t\tmd: 'p-8',\n\t\tlg: 'p-12'\n\t},\n\tmaxWidth: {\n\t\tsm: 'max-w-sm',\n\t\tmd: 'max-w-md',\n\t\tlg: 'max-w-lg'\n\t}\n}\n","'use client'\nimport { cn } from '@/utils'\nimport { Color } from 'global/colors'\nimport { File } from 'icons'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport { settings } from './settings'\nimport type { DropzoneProperties } from './types'\n\nconst Dropzone = ({\n\tonDropFile = () => null,\n\tdefaultFiles = [],\n\tmultiple = false,\n\tdisabled = false,\n\tclassName = '',\n\tstyle,\n\taccept = 'image/*',\n\tvariant = 'foreground',\n\tonChange = () => null,\n\tonFileDelete = () => null,\n\tsize = 'sm',\n\t...properties\n}: DropzoneProperties) => {\n\tconst [files, setFiles] = useState<File[]>(defaultFiles)\n\tconst reference = useRef<HTMLInputElement>(null)\n\tconst onDrop = useCallback(\n\t\t(acceptedFiles: File[]) => {\n\t\t\tif (!multiple) {\n\t\t\t\tsetFiles(acceptedFiles)\n\t\t\t\tonDropFile(acceptedFiles)\n\t\t\t}\n\t\t\tsetFiles([...files, ...acceptedFiles])\n\t\t\tonDropFile(acceptedFiles)\n\t\t},\n\t\t[files, multiple, onDropFile]\n\t)\n\tuseEffect(() => {\n\t\tif (reference.current && files.length === 0) {\n\t\t\treference.current.value = ''\n\t\t}\n\t}, [files])\n\n\treturn (\n\t\t<div className={cn(settings.maxWidth[size], className)} style={style}>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'no-scrollbar flex gap-2 overflow-scroll',\n\t\t\t\t\tfiles.length === 0 && 'hidden'\n\t\t\t\t)}>\n\t\t\t\t{files.map(\n\t\t\t\t\tfile =>\n\t\t\t\t\t\tfile && (\n\t\t\t\t\t\t\t<div key={file.name + file.type}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcolor={variant}\n\t\t\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t\t\t'mb-2 max-w-[200px] items-center justify-center rounded border-[1px] p-2 text-center',\n\t\t\t\t\t\t\t\t\t\tsettings.colors[variant]\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetFiles(files.filter(f => f.name !== file.name))\n\t\t\t\t\t\t\t\t\t\tonFileDelete(file, files.indexOf(file))\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<File\n\t\t\t\t\t\t\t\t\t\tcolor={Color.white}\n\t\t\t\t\t\t\t\t\t\twidth={45}\n\t\t\t\t\t\t\t\t\t\theight={45}\n\t\t\t\t\t\t\t\t\t\tclassName='mx-auto mb-2'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span className='block overflow-hidden text-ellipsis '>\n\t\t\t\t\t\t\t\t\t\t{file.name}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'mt-2 flex cursor-pointer items-center justify-center rounded  border-[1px]  duration-200',\n\t\t\t\t\tsettings.padding[size],\n\t\t\t\t\tsettings.colors[variant]\n\t\t\t\t)}>\n\t\t\t\t<input\n\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\ttype='file'\n\t\t\t\t\tref={reference}\n\t\t\t\t\tclassName='h-full w-full cursor-pointer'\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\taccept={accept}\n\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\tif (event.target.files) {\n\t\t\t\t\t\t\tonDrop([...event.target.files])\n\t\t\t\t\t\t\tonChange(event)\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\t{...properties}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Dropzone\n","'use client'\nimport { Controller, type Path, type PathValue } from 'react-hook-form'\nimport Dropzone from './dropzone'\nimport type { FormDropZoneProperties } from './types'\n\nconst FormDropzone = <T extends Record<string, any>>({\n\tvariant = 'foreground',\n\tsize = 'sm',\n\t...properties\n}: FormDropZoneProperties<T>) => (\n\t<Controller\n\t\tcontrol={properties.control}\n\t\tname={properties.name}\n\t\tdefaultValue={properties.defaultValue as PathValue<T, Path<T>>}\n\t\trender={({ field: { onChange, onBlur }, fieldState: { error } }) => (\n\t\t\t<div>\n\t\t\t\t<Dropzone\n\t\t\t\t\tsize={size}\n\t\t\t\t\tvariant={variant}\n\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t{...properties}\n\t\t\t\t/>\n\t\t\t\t{!!error && (\n\t\t\t\t\t<p className='text-danger text-md mt-2 italic'>{error.message}</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)}\n\t/>\n)\n\nexport default FormDropzone\n","import type { ClampPaletteType } from 'global/colors'\n\nexport const settings: {\n\tcolors: Record<ClampPaletteType, string>\n} = {\n\tcolors: {\n\t\tforeground:\n\t\t\t'bg-foreground placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-bordered',\n\t\tmuted:\n\t\t\t'bg-muted placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-gray',\n\t\tbackground:\n\t\t\t'bg-background border-[1px] border-bordered placeholder-white text-white hover:border-bordered focus:border-foreground'\n\t}\n}\n","import { cn } from '@/utils'\nimport { Color } from 'global/colors'\nimport type { FC } from 'react'\nimport { settings } from './settings'\nimport type { InputProperties } from './types'\n\nconst Input: FC<InputProperties> = ({\n\ticon: Icon,\n\tisError = false,\n\tclassName = '',\n\tvariant = 'foreground',\n\t...properties\n}) => (\n\t<div className='relative flex h-full w-full cursor-text items-center justify-center'>\n\t\t<input\n\t\t\tclassName={cn(\n\t\t\t\t'placeholder-gray focus:shadow-outline w-full rounded border-0 px-4 py-1.5 text-sm text-white duration-200 ease-linear focus:outline-0',\n\t\t\t\tIcon && 'pl-9',\n\t\t\t\tisError && 'border-danger border-[1px]',\n\t\t\t\tsettings.colors[variant],\n\t\t\t\tproperties.disabled && 'cursor-not-allowed',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\t{...properties}\n\t\t/>\n\t\t{Icon ? (\n\t\t\t<Icon\n\t\t\t\twidth={20}\n\t\t\t\theight={20}\n\t\t\t\tcolor={Color.gray}\n\t\t\t\tclassName='absolute left-2.5'\n\t\t\t/>\n\t\t) : null}\n\t</div>\n)\n\nexport default Input\n","import type { ReactNode } from 'react'\nimport type { Path, PathValue } from 'react-hook-form'\nimport { Controller } from 'react-hook-form'\nimport Input from './input'\nimport type { FieldProperties } from './types'\n\nconst Field = <T extends Record<string, any>>({\n\tvariant = 'foreground',\n\tclassName,\n\tstyle,\n\ticon: Icon,\n\t...properties\n}: FieldProperties<T>): ReactNode | null => (\n\t<Controller\n\t\tcontrol={properties.control}\n\t\tname={properties.name}\n\t\tdefaultValue={properties.defaultValue as PathValue<T, Path<T>>}\n\t\trender={({ field: { value, onChange, onBlur }, fieldState: { error } }) => (\n\t\t\t<div className={className} style={style}>\n\t\t\t\t<Input\n\t\t\t\t\tvariant={variant}\n\t\t\t\t\tisError={!!error}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\ticon={Icon}\n\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\tonChange={\n\t\t\t\t\t\tproperties.type === 'number'\n\t\t\t\t\t\t\t? event => onChange(Number(+event.target.value))\n\t\t\t\t\t\t\t: onChange\n\t\t\t\t\t}\n\t\t\t\t\t{...properties}\n\t\t\t\t/>\n\t\t\t\t{!!error && (\n\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{error.message}</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)}\n\t/>\n)\n\nexport default Field\n","import type { LayoutProperties } from '@/components/ui/layout/types'\nimport type { FC } from 'react'\n\nconst Layout: FC<LayoutProperties> = ({ children, ...properties }) => (\n\t<div {...properties}> {children}</div>\n)\n\nexport default Layout\n","import type { ClampPaletteType } from 'global/colors'\n\nexport const settings: {\n\tcolors: Record<ClampPaletteType, string>\n} = {\n\tcolors: {\n\t\tforeground:\n\t\t\t'bg-foreground placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-bordered',\n\t\tmuted:\n\t\t\t'bg-muted placeholder-white text-white border-[1px] border-bordered hover:border-bordered focus:border-gray',\n\t\tbackground:\n\t\t\t'bg-background border-[1px] border-foreground placeholder-white text-white hover:border-foreground focus:border-foreground'\n\t}\n}\n","import { cn } from '@/utils'\nimport type { FC } from 'react'\nimport { settings } from './settings'\nimport type { TextAreaProperties } from './types'\n\nconst TextArea: FC<TextAreaProperties> = ({\n\tvariant = 'foreground',\n\tclassName = '',\n\t...properties\n}) => (\n\t<textarea\n\t\tvalue={properties.value}\n\t\tclassName={cn(\n\t\t\t'placeholder-gray h-full w-full resize-none rounded p-2 text-white focus:outline-0',\n\t\t\tsettings.colors[variant],\n\t\t\tproperties.disabled && 'cursor-not-allowed',\n\t\t\tclassName\n\t\t)}\n\t\t{...properties}\n\t/>\n)\n\nexport default TextArea\n","import type { Path, PathValue } from 'react-hook-form'\nimport { Controller } from 'react-hook-form'\nimport TextArea from './text-area'\nimport type { FormTextEditorProperties } from './types'\n\nconst FormTextEditor = <T extends Record<string, any>>({\n\tvariant = 'foreground',\n\tclassName,\n\tstyle,\n\t...properties\n}: FormTextEditorProperties<T>) => (\n\t<Controller\n\t\tcontrol={properties.control}\n\t\tname={properties.name}\n\t\tdefaultValue={properties.defaultValue as PathValue<T, Path<T>>}\n\t\trender={({ field: { value, onChange, onBlur }, fieldState: { error } }) => (\n\t\t\t<div className={className} style={style}>\n\t\t\t\t<TextArea\n\t\t\t\t\tvariant={variant}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t{...properties}\n\t\t\t\t/>\n\t\t\t\t{!!error && (\n\t\t\t\t\t<p className='text-danger mt-0.5 text-xs italic'>{error.message}</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t)}\n\t/>\n)\n\nexport default FormTextEditor\n","export { default as Button } from './button/button'\nexport { default as DropZone } from './dropzone/dropzone'\nexport { default as FormDropZone } from './dropzone/form-dropzone'\nexport { default as Field } from './field/field'\nexport { default as Input } from './field/input'\nexport { default as Layout } from './layout/layout'\nexport { default as Spiner } from './loader/loader'\nexport { default as FormTextArea } from './text-editor/form-text-editor'\nexport { default as TextArea } from './text-editor/text-area'\n","import type { FC } from 'react'\nimport type { LoaderProperties } from './types'\n\nconst Loader: FC<LoaderProperties> = ({\n\twidth = 16,\n\theight = 16,\n\tcolor = 'primary'\n}) => (\n\t<svg\n\t\tclassName='animate-spin'\n\t\tfill='none'\n\t\tviewBox='0 0 24 24'\n\t\tstyle={{\n\t\t\tcolor: color,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t}}>\n\t\t<circle\n\t\t\tclassName='opacity-25'\n\t\t\tcx='12'\n\t\t\tcy='12'\n\t\t\tr='10'\n\t\t\tstroke='currentColor'\n\t\t\tstrokeWidth='4'\n\t\t/>\n\t\t<path\n\t\t\tclassName='opacity-75'\n\t\t\tfill='currentColor'\n\t\t\td='M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z'\n\t\t/>\n\t</svg>\n)\n\nexport default Loader\n","'use client'\n\nimport { cn } from '@/utils'\nimport * as PopoverPrimitive from '@radix-ui/react-popover'\nimport type { ComponentPropsWithoutRef, ElementRef } from 'react'\nimport { forwardRef } from 'react'\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverAnchor = PopoverPrimitive.Anchor\n\nconst PopoverContent = forwardRef<\n\tElementRef<typeof PopoverPrimitive.Content>,\n\tComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(\n\t(\n\t\t{ className, align = 'center', sideOffset = 4, ...properties },\n\t\treference\n\t) => (\n\t\t<PopoverPrimitive.Portal>\n\t\t\t<PopoverPrimitive.Content\n\t\t\t\tref={reference}\n\t\t\t\talign={align}\n\t\t\t\tsideOffset={sideOffset}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'bg-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 border-bordered z-50 w-72 rounded border  p-4 text-white shadow-md outline-none',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t\t{...properties}\n\t\t\t/>\n\t\t</PopoverPrimitive.Portal>\n\t)\n)\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverAnchor, PopoverContent, PopoverTrigger }\n","//TODO: проверить во всех вариантах валидацию\nexport const validateNumberParameter = (parameter: any): number => {\n\tif (!parameter) return 0\n\tif (parameter < 0 || parameter > 10_000) throw new Error('Invalid parameter')\n\n\treturn +parameter\n}\n\nexport const validateStringParameter = (parameter: any): string => {\n\tif (!parameter) return ''\n\tif (typeof parameter !== 'string') throw new Error('Invalid parameter')\n\treturn parameter\n}\n","import { z } from 'zod'\n\nexport const EBookBaseSchema = z.object({\n\tid: z.number().min(1),\n\ttitle: z\n\t\t.string()\n\t\t.max(100)\n\t\t.min(3)\n\t\t.refine(value => value !== 'undefined', {\n\t\t\tmessage: 'Name cannot be empty'\n\t\t})\n\t\t.refine(value => !value.includes('.epub'), {\n\t\t\tmessage: 'Title cannot include .epub'\n\t\t})\n})\n\nexport const ChapterPayloadSchema = z.object({\n\tid: z.number().min(1),\n\tname: z\n\t\t.string()\n\t\t.refine(value => !value.includes('.epub'), {\n\t\t\tmessage: 'Name cannot include .epub'\n\t\t})\n\t\t.refine(value => value !== 'undefined', {\n\t\t\tmessage: 'Name cannot be empty'\n\t\t}),\n\ttext: z.string().refine(\n\t\tvalue => {\n\t\t\tconst regex = /<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)<\\/\\1>/\n\t\t\treturn regex.test(value)\n\t\t},\n\t\t{\n\t\t\tmessage: 'Text should be in HTML format'\n\t\t}\n\t)\n})\n\nexport const EBookPayloadSchema = z\n\t.object({\n\t\tchapters: z.array(ChapterPayloadSchema).min(1)\n\t})\n\t.merge(EBookBaseSchema)\n\nexport type EBookPayloadType = z.infer<typeof EBookPayloadSchema>\n"],"names":["trimValidation","z","object","startLine","number","int","endLine","TrimContentMenu","onSubmit","param","control","handleSubmit","useForm","resolver","zodResolver","jsx_runtime","jsxs","Popover","jsx","PopoverTrigger","Scissors","width","height","className","PopoverContent","div","h4","p","Field","variant","type","name","placeholder","Button","size","onClick","chapterNames","useBookCompose","ebooks","setEBooks","mutateAsync","unfold","isLoading","unfoldLoading","useMutation","mutationKey","mutationFn","api","parser","file","onSuccess","successToast","onError","errorToast","upload","title","chapters","elementIndex","length","id","books","files","File","then","data","state","trimmingEBookContent","bookId","map","book","text","split","filter","_","index","join","generateChapterNames","content","concat","addNewCharacterAfterContent","chapterId","findIndex","slice","Math","round","random","delete","updateToc","value","chapter","updateBookTitle","mergeContentWithTopCharacter","topChapterId","insertedContent","element","find","removeToc","removedId","moveChaptersToNewBook","oldBookChapters","some","newBook","error_message","memo","message","editor","Controller","render","field","onChange","fieldState","error","console","log","Fragment","h1","DropZone","multiple","accept","disabled","onDropFile","onFileDelete","_file","Number","bookIndex","bookError","Input","defaultValue","onBlur","event","target","ErrorMessage","CaseSensitive","chapterIndex","chapterError","ChevronUp","ChevronDown","Combine","Close","TextArea","DialogPrimitive","DialogPortal","DialogOverlay","forwardRef","reference","properties","ref","cn","displayName","DialogContent","children","span","DialogTitle","DialogDescription","Command","CommandPrimitive","CommandInput","Search","CommandList","List","CommandEmpty","Empty","CommandGroup","Group","CommandSeparator","Separator","CommandItem","Item","select_genres","genres","useQuery","queryKey","queryFn","genre","catalog","select","setGenre","slug","onSelect","Check","color","Color","white","Boolean","useUploadFile","uploadLoading","folder","storage","text1","text2","SelectPicture","setPicture","input","response","img","src","getFileUrl","alt","document","querySelector","click","settings","colors","foreground","muted","primary","danger","background","success","warning","sm","md","lg","iconSize","button_button","icon","Icon","fullWidth","button","Loader","InnerColor","padding","maxWidth","dropzone","defaultFiles","style","setFiles","useState","useRef","onDrop","useCallback","acceptedFiles","useEffect","current","f","indexOf","isError","gray","text_area","textarea","form_text_editor","__webpack_exports__","Z","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","svg","fill","viewBox","circle","cx","cy","r","stroke","strokeWidth","path","d","PopoverPrimitive","align","sideOffset","validateNumberParameter","parameter","validateStringParameter","EBookBaseSchema","min","string","max","refine","includes","ChapterPayloadSchema","regex","test","EBookPayloadSchema","array","merge"],"sourceRoot":""}