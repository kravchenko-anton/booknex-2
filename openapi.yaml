openapi: 3.0.0
paths:
  /user/library:
    post:
      operationId: library
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/ReadingHistory"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserLibraryOutput"
      tags:
        - üë§ user
      security:
        - bearer: []
  /user/statistics:
    post:
      operationId: statistics
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/ReadingHistory"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserStatistics"
      tags:
        - üë§ user
      security:
        - bearer: []
  /user/adjust-goal:
    patch:
      operationId: adjustGoal
      parameters:
        - name: goal
          required: true
          in: query
          schema:
            type: number
      responses:
        "200":
          description: ""
      tags:
        - üë§ user
      security:
        - bearer: []
  "/user/start-reading/{slug}":
    patch:
      operationId: startReading
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags:
        - üë§ user
      security:
        - bearer: []
  "/user/finish-reading/{slug}":
    patch:
      operationId: finishReading
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags:
        - üë§ user
      security:
        - bearer: []
  "/user/toggle-save/{slug}":
    patch:
      operationId: toggleSave
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: boolean
      tags:
        - üë§ user
      security:
        - bearer: []
  "/user/is-saved/{slug}":
    get:
      operationId: isSaved
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: boolean
      tags:
        - üë§ user
      security:
        - bearer: []
  /user/admin/catalog:
    get:
      operationId: catalog
      parameters:
        - name: searchTerm
          required: true
          in: query
          schema:
            type: string
        - name: cursor
          required: true
          in: query
          schema:
            type: number
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserCatalogOutput"
      tags:
        - üë§ user
      security:
        - bearer: []
  "/user/admin/remove/{id}":
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: number
      responses:
        "200":
          description: ""
      tags:
        - üë§ user
      security:
        - bearer: []
  "/catalog/search/{query}":
    get:
      operationId: search
      parameters:
        - name: query
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ShortBook"
      tags:
        - üìö catalog
      security:
        - bearer: []
  /catalog/featured:
    get:
      operationId: featured
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FeaturedOutput"
      tags:
        - üìö catalog
      security:
        - bearer: []
  /catalog/picks-of-the-week:
    get:
      operationId: picksOfTheWeek
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ShortBook"
      tags:
        - üìö catalog
      security:
        - bearer: []
  /genre:
    get:
      operationId: catalog
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ShortGenre"
      tags:
        - üîñ genre
      security:
        - bearer: []
  "/genre/by-slug/{slug}":
    get:
      operationId: bySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FindOneGenreOutput"
      tags:
        - üîñ genre
      security:
        - bearer: []
  "/book/info/by-slug/{slug}":
    get:
      operationId: infoBySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InfoBySlug"
      tags:
        - üìô book
      security:
        - bearer: []
  "/book/admin-info/by-slug/{slug}":
    get:
      operationId: adminInfoBySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FullBook"
      tags:
        - üìô book
      security:
        - bearer: []
  /book/admin/catalog:
    get:
      operationId: catalog
      parameters:
        - name: searchTerm
          required: true
          in: query
          schema:
            type: string
        - name: page
          required: true
          in: query
          schema:
            type: number
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CatalogOutput"
      tags:
        - üìô book
      security:
        - bearer: []
  /book/admin/create:
    post:
      operationId: create
      parameters: []
      requestBody:
        required: true
        description: Create book
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateBookDto"
      responses:
        "200":
          description: ""
      tags:
        - üìô book
      security:
        - bearer: []
  "/book/admin/update/{slug}":
    put:
      operationId: update
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateBookDto"
      responses:
        "200":
          description: ""
      tags:
        - üìô book
      security:
        - bearer: []
  "/book/admin/remove/{slug}":
    delete:
      operationId: remove
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags:
        - üìô book
      security:
        - bearer: []
  /auth/google-sign:
    post:
      operationId: googleSign
      parameters: []
      requestBody:
        required: true
        description: Sign in with google account
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GoogleAuthDto"
      responses:
        "200":
          description: Return access and refresh token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthOutput"
      tags:
        - üîê auth
  /auth/mail-register:
    post:
      operationId: mailRegister
      parameters: []
      requestBody:
        required: true
        description: Register new user
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AuthDto"
      responses:
        "200":
          description: Return access and refresh token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthOutput"
      tags:
        - üîê auth
  /auth/mail-login:
    post:
      operationId: mailLogin
      parameters: []
      requestBody:
        required: true
        description: Login user
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AuthDto"
      responses:
        "200":
          description: Return access and refresh token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthOutput"
      tags:
        - üîê auth
  /auth/refresh:
    post:
      operationId: refreshToken
      parameters: []
      requestBody:
        required: true
        description: Refresh access token
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshDto"
      responses:
        "200":
          description: Return access token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthOutput"
      tags:
        - üîê auth
  "/storage/{folder}":
    post:
      operationId: upload
      parameters:
        - name: folder
          required: true
          in: path
          schema:
            enum:
              - ebooks
              - booksCovers
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: File uploaded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UploadOutputDto"
      tags:
        - storage
      security:
        - bearer: []
  /parser/admin/catalog:
    get:
      operationId: catalog
      parameters:
        - name: searchTerm
          required: false
          in: query
          example: The Hobbit
          schema:
            type: string
        - name: page
          required: false
          in: query
          example: 1
          schema:
            type: number
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookTemplateCatalogOutput"
      tags:
        - üì¶ parser
      security:
        - bearer: []
  "/parser/admin/by-slug/{slug}":
    get:
      operationId: bySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookTemplate"
      tags:
        - üì¶ parser
      security:
        - bearer: []
  /parser/admin/parse:
    post:
      operationId: parse
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ParserDto"
      responses:
        "201":
          description: ""
      tags:
        - üì¶ parser
      security:
        - bearer: []
  /parser/admin/unfold:
    post:
      operationId: unfold
      parameters: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        "200":
          description: Unfolded book content
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UnfoldOutput"
      tags:
        - üì¶ parser
      security:
        - bearer: []
  "/parser/admin/remove/{slug}":
    delete:
      operationId: remove
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
      tags:
        - üì¶ parser
      security:
        - bearer: []
  "/review/review/{slug}":
    post:
      operationId: review
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        description: Review book
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ReviewDto"
      responses:
        "200":
          description: Review book
      tags:
        - ‚≠ê review
      security:
        - bearer: []
  /recommendation/update-recommendation:
    post:
      operationId: updateRecommendation
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRecommendationDto"
      responses:
        "200":
          description: Recommendation updated
      tags:
        - üì® recommendation
      security:
        - bearer: []
  /recommendation/recommendation-genre:
    get:
      operationId: currentRecommendation
      parameters: []
      responses:
        "200":
          description: Recommendation genres
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ShortGenre"
      tags:
        - üì® recommendation
      security:
        - bearer: []
  /health:
    get:
      operationId: check
      parameters: []
      responses:
        "200":
          description: Health check
          content:
            application/json:
              schema:
                type: object
        "503":
          description: The Health Check is not successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  info:
                    type: object
                    example:
                      database:
                        status: up
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  error:
                    type: object
                    example:
                      redis:
                        status: down
                        message: Could not connect
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
                    nullable: true
                  details:
                    type: object
                    example:
                      database:
                        status: up
                      redis:
                        status: down
                        message: Could not connect
                    additionalProperties:
                      type: object
                      required:
                        - status
                      properties:
                        status:
                          type: string
                      additionalProperties: true
      tags:
        - ‚ù§Ô∏è health
  "/ebook/ebook/by-slug/{slug}":
    get:
      operationId: ebookBySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EbookOutput"
      tags:
        - üìô ebook
  "/ebook/admin/stored-ebook/{slug}":
    get:
      operationId: storedEbookBySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/StoredEBook"
      tags:
        - üìô ebook
info:
  title: Booknex
  description: ""
  version: "1.0"
  contact:
    name: Booknex
    url: https://github.com/kravchenko-anton/booknex-2-monorepo
    email: Github repository
tags:
  - name: üë§ user
    description: user service
  - name: üîê auth
    description: auth service
  - name: üìô book
    description: book service
  - name: üìö catalog
    description: catalog service
  - name: ‚ù§Ô∏è health
    description: health service
  - name: üîñ genre
    description: genre service
  - name: üìÅ storage
    description: storage service
  - name: ‚≠ê review
    description: review service
  - name: üì® recommendation
    description: recommendation service
  - name: üì¶ parser
    description: parser service
servers: []
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    ReadingHistory:
      type: object
      properties:
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time
        startProgress:
          type: number
        endProgress:
          type: number
        progressDelta:
          type: number
        readingTimeMs:
          type: number
        scrollPosition:
          type: number
        bookSlug:
          type: string
      required:
        - startDate
        - endDate
        - startProgress
        - endProgress
        - progressDelta
        - readingTimeMs
        - scrollPosition
        - bookSlug
    UserLibraryOutput:
      type: object
      properties:
        readingBooks:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
              readingHistory:
                type: object
                properties:
                  progress:
                    type: number
                    required: true
                  scrollPosition:
                    type: number
                    required: true
                required: true
                nullable: true
            required:
              - slug
              - title
              - picture
              - author
              - readingHistory
        finishedBooks:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
        savedBooks:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
      required:
        - readingBooks
        - finishedBooks
        - savedBooks
    UserStatistics:
      type: object
      properties:
        progressByCurrentWeek:
          type: array
          items:
            type: object
            properties:
              day:
                type: string
                required: true
              isCurrentDay:
                type: boolean
                required: true
              readingTimeMs:
                type: number
                required: true
              dayProgress:
                type: number
                required: true
            required:
              - day
              - isCurrentDay
              - readingTimeMs
              - dayProgress
        pepTalk:
          type: string
        goalMinutes:
          type: number
        userSteak:
          type: number
      required:
        - progressByCurrentWeek
        - pepTalk
        - goalMinutes
        - userSteak
    UserCatalogOutput:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
                required: true
              email:
                type: string
                format: email
                required: true
              selectedGenres:
                type: array
                items:
                  type: object
                  properties:
                    slug:
                      type: string
                      required: true
                    name:
                      type: string
                      required: true
                    icon:
                      type: string
                      required: true
                    emoji:
                      type: string
                      required: true
                  required:
                    - slug
                    - name
                    - icon
                    - emoji
                required: true
              statistics:
                type: array
                items:
                  type: object
                  properties:
                    endDate:
                      type: string
                      format: date-time
                      required: true
                    progressDelta:
                      type: number
                      required: true
                    readingTimeMs:
                      type: number
                      required: true
                  required:
                    - endDate
                    - progressDelta
                    - readingTimeMs
                required: true
              _count:
                type: object
                properties:
                  savedBooks:
                    type: number
                    required: true
                  finishedBooks:
                    type: number
                    required: true
                  readingBooks:
                    type: number
                    required: true
                required: true
                additionalProperties: false
              createdAt:
                type: string
                format: date-time
                required: true
              socialId:
                type: string
                required: false
                nullable: true
              picture:
                type: string
                required: true
              fullName:
                type: string
                required: true
              location:
                type: string
                required: true
            required:
              - id
              - email
              - selectedGenres
              - statistics
              - _count
              - createdAt
              - picture
              - fullName
              - location
        canLoadMore:
          type: boolean
        totalPages:
          type: number
      required:
        - data
        - canLoadMore
        - totalPages
    ShortBook:
      type: object
      properties:
        slug:
          type: string
        title:
          type: string
        picture:
          type: string
        author:
          type: string
      required:
        - slug
        - title
        - picture
        - author
    FeaturedOutput:
      type: object
      properties:
        picksOfWeek:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
        bestSellingBooks:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
        newReleases:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
        booksBySelectedGenres:
          type: array
          items:
            type: array
            items:
              type: object
              properties:
                slug:
                  type: string
                  required: true
                title:
                  type: string
                  required: true
                picture:
                  type: string
                  required: true
                author:
                  type: string
                  required: true
              required:
                - slug
                - title
                - picture
                - author
      required:
        - picksOfWeek
        - genres
        - bestSellingBooks
        - newReleases
        - booksBySelectedGenres
    ShortGenre:
      type: object
      properties:
        slug:
          type: string
        name:
          type: string
        icon:
          type: string
        emoji:
          type: string
      required:
        - slug
        - name
        - icon
        - emoji
    FindOneGenreOutput:
      type: object
      properties:
        books:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
        slug:
          type: string
        name:
          type: string
        icon:
          type: string
        emoji:
          type: string
      required:
        - books
        - slug
        - name
        - icon
        - emoji
    InfoBySlug:
      type: object
      properties:
        description:
          type: string
        readingTime:
          type: number
        chapters:
          type: number
        rating:
          type: number
        isPublic:
          type: boolean
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
        slug:
          type: string
        title:
          type: string
        picture:
          type: string
        author:
          type: string
        fromSameAuthor:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - slug
              - title
              - picture
              - author
      required:
        - description
        - readingTime
        - chapters
        - rating
        - isPublic
        - genres
        - slug
        - title
        - picture
        - author
        - fromSameAuthor
    FullBook:
      type: object
      properties:
        description:
          type: string
        readingTime:
          type: number
        chapters:
          type: number
        rating:
          type: number
        isPublic:
          type: boolean
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
        slug:
          type: string
        title:
          type: string
        picture:
          type: string
        author:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        recommendable:
          type: boolean
        ebook:
          type: string
        _count:
          type: object
          properties:
            finishedBy:
              type: number
              required: true
            readingBy:
              type: number
              required: true
            savedBy:
              type: number
              required: true
          additionalProperties: false
        statistics:
          type: array
          items:
            type: object
            properties:
              endDate:
                type: string
                format: date-time
                required: true
              progressDelta:
                type: number
                required: true
              pagesRead:
                type: number
                required: true
              readingTimeMs:
                type: number
                required: true
            required:
              - endDate
              - progressDelta
              - pagesRead
              - readingTimeMs
        review:
          type: array
          items:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: number
                    required: true
                  picture:
                    type: string
                    required: true
                  email:
                    type: string
                    required: true
                required: true
              tags:
                type: array
                items:
                  type: string
                required: true
              text:
                type: string
                required: false
                nullable: true
              rating:
                type: number
                required: true
            required:
              - user
              - tags
              - rating
      required:
        - description
        - readingTime
        - chapters
        - rating
        - isPublic
        - genres
        - slug
        - title
        - picture
        - author
        - createdAt
        - updatedAt
        - recommendable
        - ebook
        - _count
        - statistics
        - review
    CatalogOutput:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              description:
                type: string
                required: true
              readingTime:
                type: number
                required: true
              chapters:
                type: number
                required: true
              rating:
                type: number
                required: true
              isPublic:
                type: boolean
                required: true
              genres:
                type: array
                items:
                  type: object
                  properties:
                    slug:
                      type: string
                      required: true
                    name:
                      type: string
                      required: true
                    icon:
                      type: string
                      required: true
                    emoji:
                      type: string
                      required: true
                  required:
                    - slug
                    - name
                    - icon
                    - emoji
                required: true
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              picture:
                type: string
                required: true
              author:
                type: string
                required: true
            required:
              - description
              - readingTime
              - chapters
              - rating
              - isPublic
              - genres
              - slug
              - title
              - picture
              - author
        canLoadMore:
          type: boolean
        totalPages:
          type: number
      required:
        - data
        - canLoadMore
        - totalPages
    CreateBookDto:
      type: object
      properties:
        title:
          type: string
        author:
          type: string
        description:
          type: string
          maxLength: 1000
          minLength: 10
        ebook:
          type: array
          items:
            type: object
            properties:
              chapters:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: number
                      minimum: 1
                      required: true
                    name:
                      type: string
                      required: true
                    text:
                      type: string
                      required: true
                  required:
                    - id
                    - name
                    - text
                minItems: 1
                required: true
              id:
                type: number
                minimum: 1
                required: true
              title:
                type: string
                maxLength: 100
                minLength: 3
                required: true
            required:
              - chapters
              - id
              - title
          minItems: 1
        rating:
          type: number
          minimum: 0
          exclusiveMinimum: true
        picture:
          type: string
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
          minItems: 1
      required:
        - title
        - author
        - description
        - ebook
        - rating
        - picture
        - genres
    UpdateBookDto:
      type: object
      properties:
        title:
          type: string
        author:
          type: string
        description:
          type: string
          maxLength: 1000
          minLength: 10
        ebook:
          type: array
          items:
            type: object
            properties:
              chapters:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: number
                      minimum: 1
                      required: true
                    name:
                      type: string
                      required: true
                    text:
                      type: string
                      required: true
                  required:
                    - id
                    - name
                    - text
                minItems: 1
                required: true
              id:
                type: number
                minimum: 1
                required: true
              title:
                type: string
                maxLength: 100
                minLength: 3
                required: true
            required:
              - chapters
              - id
              - title
          minItems: 1
        isPublic:
          type: boolean
        recommendable:
          type: boolean
        rating:
          type: number
          minimum: 0
          exclusiveMinimum: true
        picture:
          type: string
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
          minItems: 1
    GoogleAuthDto:
      type: object
      properties:
        socialId:
          type: string
      required:
        - socialId
    AuthOutput:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string
        type:
          type: string
        user:
          type: object
          properties:
            email:
              type: string
              format: email
              required: true
            role:
              type: string
              enum:
                - user
                - admin
              required: true
      required:
        - accessToken
        - refreshToken
        - user
    AuthDto:
      type: object
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
      required:
        - email
        - password
    RefreshDto:
      type: object
      properties:
        refreshToken:
          type: string
      required:
        - refreshToken
    UploadOutputDto:
      type: object
      properties:
        name:
          type: string
      required:
        - name
    BookTemplateCatalogOutput:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              title:
                type: string
                required: true
              author:
                type: string
                required: true
              description:
                type: string
                required: true
              picture:
                type: string
                required: true
              rating:
                type: number
                maximum: 5
                minimum: 1
                required: true
              genres:
                type: array
                items:
                  type: object
                  properties:
                    slug:
                      type: string
                      required: true
                    name:
                      type: string
                      required: true
                    icon:
                      type: string
                      required: true
                    emoji:
                      type: string
                      required: true
                  required:
                    - slug
                    - name
                    - icon
                    - emoji
                required: true
            required:
              - slug
              - title
              - author
              - description
              - picture
              - rating
              - genres
        canLoadMore:
          type: boolean
        totalPages:
          type: number
      required:
        - data
        - canLoadMore
        - totalPages
    BookTemplate:
      type: object
      properties:
        slug:
          type: string
        title:
          type: string
        author:
          type: string
        description:
          type: string
        picture:
          type: string
        rating:
          type: number
          maximum: 5
          minimum: 1
        genres:
          type: array
          items:
            type: object
            properties:
              slug:
                type: string
                required: true
              name:
                type: string
                required: true
              icon:
                type: string
                required: true
              emoji:
                type: string
                required: true
            required:
              - slug
              - name
              - icon
              - emoji
      required:
        - slug
        - title
        - author
        - description
        - picture
        - rating
        - genres
    ParserDto:
      type: object
      properties:
        url:
          type: string
          minLength: 1
          maxLength: 255
        page:
          type: integer
          minimum: 0
      required:
        - url
        - page
    UnfoldOutput:
      type: object
      properties:
        id:
          type: number
        name:
          type: string
        text:
          type: string
      required:
        - id
        - name
        - text
    ReviewDto:
      type: object
      properties:
        rating:
          type: integer
          minimum: 1
          maximum: 5
        tags:
          type: array
          items:
            type: string
        comment:
          type: string
      required:
        - rating
    UpdateRecommendationDto:
      type: object
      properties:
        genreSlugs:
          type: array
          items:
            type: string
          minItems: 1
      required:
        - genreSlugs
    EbookOutput:
      type: object
      properties:
        file:
          type: array
          items:
            type: string
        chapters:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
                required: true
              children:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      required: true
                    link:
                      type: string
                      required: true
                  required:
                    - name
                    - link
                required: true
            required:
              - title
              - children
        title:
          type: string
        picture:
          type: string
      required:
        - file
        - chapters
        - title
        - picture
    StoredEBook:
      type: object
      properties:
        chapters:
          type: array
          items:
            type: object
            properties:
              romanNumber:
                type: string
                required: true
              readingTime:
                type: number
                required: true
              id:
                type: number
                minimum: 1
                required: true
              name:
                type: string
                required: true
              text:
                type: string
                required: true
            required:
              - romanNumber
              - readingTime
              - id
              - name
              - text
          minItems: 1
        id:
          type: number
          minimum: 1
        title:
          type: string
          maxLength: 100
          minLength: 3
      required:
        - chapters
        - id
        - title
